{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"index.html","text":"ParkingPlus: WPS_LPR Esta se\u00e7\u00e3o re\u00fane o manual e documenta\u00e7\u00f5es relacionados ao Parking Plus WPS_LPR. (L)icense (P)late (R)ecognition - Reconhecimento de Placas de Ve\u00edculos. O LPR \u00e9 um recurso que permite a identifica\u00e7\u00e3o de uma placa de ve\u00edculo no momento da sua entrada. A identifica\u00e7\u00e3o \u00e9 efetuada atrav\u00e9s do servi\u00e7o ParkingPlus:WPS_LPR que recebe as imagens das pistas atrav\u00e9s das c\u00e2meras que est\u00e3o instaladas para este fim, e executa o processo de OCR para obten\u00e7\u00e3o dos caracteres contido nas placas de ve\u00edculos. Para configurar o sistema operacional siga as etapas descritas na se\u00e7\u00e3o abaixo. Configura\u00e7\u00e3o Sistema Operacional .","title":"Inicio"},{"location":"index.html#parkingplus-wps_lpr","text":"Esta se\u00e7\u00e3o re\u00fane o manual e documenta\u00e7\u00f5es relacionados ao Parking Plus WPS_LPR. (L)icense (P)late (R)ecognition - Reconhecimento de Placas de Ve\u00edculos. O LPR \u00e9 um recurso que permite a identifica\u00e7\u00e3o de uma placa de ve\u00edculo no momento da sua entrada. A identifica\u00e7\u00e3o \u00e9 efetuada atrav\u00e9s do servi\u00e7o ParkingPlus:WPS_LPR que recebe as imagens das pistas atrav\u00e9s das c\u00e2meras que est\u00e3o instaladas para este fim, e executa o processo de OCR para obten\u00e7\u00e3o dos caracteres contido nas placas de ve\u00edculos. Para configurar o sistema operacional siga as etapas descritas na se\u00e7\u00e3o abaixo. Configura\u00e7\u00e3o Sistema Operacional .","title":"ParkingPlus: WPS_LPR"},{"location":"configuracao_sistema_operacional.html","text":":root { --primary-color: #ff5722; } [data-md-color-scheme=\"default\"] { --tab-bg: #f9f9f9; --tab-hover: #eeeeee; --tab-active: var(--primary-color); --tab-content-bg: #fefefe; --tab-border: #ddd; --tab-text: #333; --tab-active-text: white; } [data-md-color-scheme=\"slate\"] { --tab-bg: #2e2e2e; --tab-hover: #3a3a3a; --tab-active: var(--primary-color); --tab-content-bg: #1f1f1f; --tab-border: #444; --tab-text: #eee; --tab-active-text: white; } .tab-container { border-radius: 6px; margin-bottom: 0.2rem; } .tab-buttons { display: flex; gap: 4px; padding: 6px; } .tab-buttons button { background-color: var(--tab-bg); border: 1px solid var(--tab-border); border-radius: 6px; padding: 10px 20px; font-size: 13px; cursor: pointer; color: var(--tab-text); transition: background-color 0.3s, color 0.3s; } .tab-buttons button:hover { background-color: var(--tab-hover); } .tab-buttons button.active { background-color: var(--tab-active); color: var(--tab-active-text); } .tab-content { display: none; padding: 2px; border-radius: 0 0 6px 6px; color: var(--tab-text); margin-bottom: 1rem; } .tab-content.active { display: block; } .tab-content pre { background-color: #272822; color: #f8f8f2; padding: 2px; border-radius: 6px; overflow-x: auto; } Configura\u00e7\u00e3o Sistema Operacional Nesse manual iremos abordar sobre a instala\u00e7\u00e3o dos pacotes necess\u00e1rios no sistema operacional que o servi\u00e7o ParkingPlus:WPS_LPR ir\u00e1 rodar. Pr\u00e9-Requisitos Ubuntu Server 22.04 LTS (Altamente Recomendado) CentOS 7 Debian 12 Entretanto, por se tratar de container Docker, tamb\u00e9m pode funcionar em outras distribui\u00e7\u00f5es e plataformas, por\u00e9m n\u00e3o foi testado. Instala\u00e7\u00e3o Ubuntu CentOS 7 1. Cria\u00e7\u00e3o de pastas sudo mkdir -p /instalacoes 2. Atualiza\u00e7\u00e3o do sistema sudo apt-get update && apt upgrade 3. Instala\u00e7\u00e3o de pacotes apt --fix-broken install apt-get install wget nano ntpdate vim mlocate default-jdk pciutils \\ apt-transport-https ca-certificates curl software-properties-common python3 python3-pip -y pip3 install --upgrade pip pip install glances gdown py3nvml 4. Docker e Nvidia Toolkit Docker curl -fsSL https://get.docker.com/ | sh Docker-compose sudo curl -L https://github.com/docker/compose/releases/download/v2.3.4/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose sudo chmod +x /usr/local/bin/docker-compose NVIDIA Container Toolkit curl -fsSL https://nvidia.github.io/libnvidia-container/gpgkey | sudo gpg --dearmor -o /usr/share/keyrings/nvidia-container-toolkit-keyring.gpg \\ && curl -s -L https://nvidia.github.io/libnvidia-container/stable/deb/nvidia-container-toolkit.list | \\ sed 's#deb https://#deb [signed-by=/usr/share/keyrings/nvidia-container-toolkit-keyring.gpg] https://#g' | \\ sudo tee /etc/apt/sources.list.d/nvidia-container-toolkit.list \\ && sudo apt-get update sudo apt-get install -y nvidia-container-toolkit systemctl restart docker 5. Configura\u00e7\u00e3o do Docker nvidia-ctk runtime configure --runtime=docker --config=/etc/docker/daemon.json systemctl restart docker.service 6. Instala\u00e7\u00e3o Drivers Nvidia sudo apt install nvidia-driver-535 nvidia-dkms-535 -y 7. Vari\u00e1veis de Ambiente Com GPU echo \"export NVIDIA_VISIBLE_DEVICES=all\" >> ~/.bashrc Sem GPU echo \"export NVIDIA_VISIBLE_DEVICES=void\" >> ~/.bashrc Nome da m\u00e1quina echo \"PS1='\\[\\033[1;31m\\]\\u\\[\\033[0;32m\\]@WPS_LPR\\[\\e[m\\] \\[\\e[1;34m\\]\\w\\[\\e[m\\] \\[\\e[1;32m\\]\\$\\[\\e[m\\] \\[\\e[1;37m\\]'\" >> ~/.bashrc source ~/.bashrc 8. Desabilitar duplica\u00e7\u00e3o de logs echo \"if \\$programname == 'WpsLprConcentrator' then /dev/null\" >> /etc/rsyslog.conf sed -i -e 's/^$ModLoad imuxsock/#$ModLoad imuxsock/' -e 's/^$ModLoad imjournal/#$ModLoad imjournal/' /etc/rsyslog.conf sed -i -e 's/^module(load=\"imuxsock\")/#module(load=\"imuxsock\")/' -e 's/^module(load=\"imjournal\")/#module(load=\"imjournal\")/' /etc/rsyslog.conf systemctl restart rsyslog 9. Modo de Performance gdown 1NxFukxgIMhfG5xfh076dxFkglCtHjO4S dpkg -i set-performance_1.0-2_amd64.deb systemctl start set_performance.service systemctl enable set_performance.service 1. Cria\u00e7\u00e3o de pastas sudo mkdir -p /instalacoes 2. Reposit\u00f3rios yum install https://www.elrepo.org/elrepo-release-7.el7.elrepo.noarch.rpm -y yum install epel-release -y 3. Atualiza\u00e7\u00e3o do sistema sudo yum update -y 4. Instala\u00e7\u00e3o de pacotes yum install -y wget nano ntpdate vim mlocate java-1.8.0-openjdk \\ default-jdk pciutils python3 python3-pip pip3 install --upgrade pip pip install glances gdown py3nvml 5. Docker e Nvidia Toolkit Docker curl -fsSL https://get.docker.com/ | sh Docker-compose sudo curl -L https://github.com/docker/compose/releases/download/v2.3.4/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose sudo chmod +x /usr/local/bin/docker-compose NVIDIA Container Toolkit curl -s -L https://nvidia.github.io/libnvidia-container/stable/rpm/nvidia-container-toolkit.repo | \\ sudo tee /etc/yum.repos.d/nvidia-container-toolkit.repo sudo yum install -y nvidia-container-toolkit systemctl restart docker 6. Configura\u00e7\u00e3o do Docker nvidia-ctk runtime configure --runtime=docker --config=/etc/docker/daemon.json systemctl restart docker.service 7. Instala\u00e7\u00e3o Drivers Nvidia yum -y install nvidia-detect yum install -y kmod-nvidia yum remove -y xorg-x11-drivers xorg-x11-drv-nouveau 8. Vari\u00e1veis de Ambiente Com GPU echo \"export NVIDIA_VISIBLE_DEVICES=all\" >> ~/.bashrc Sem GPU \"export NVIDIA_VISIBLE_DEVICES=void\" >> ~/.bashrc Nome da m\u00e1quina echo \"PS1='\\[\\033[1;31m\\]\\u\\[\\033[0;32m\\]@WPS_LPR\\[\\e[m\\] \\[\\e[1;34m\\]\\w\\[\\e[m\\] \\[\\e[1;32m\\]\\$\\[\\e[m\\] \\[\\e[1;37m\\]'\" >> ~/.bashrc source ~/.bashrc 9. Desabilitar duplica\u00e7\u00e3o de logs echo \"if \\$programname == 'WpsLprConcentrator' then /dev/null\" >> /etc/rsyslog.conf sed -i -e 's/^$ModLoad imuxsock/#$ModLoad imuxsock/' -e 's/^$ModLoad imjournal/#$ModLoad imjournal/' /etc/rsyslog.conf sed -i -e 's/^module(load=\"imuxsock\")/#module(load=\"imuxsock\")/' -e 's/^module(load=\"imjournal\")/#module(load=\"imjournal\")/' /etc/rsyslog.conf systemctl restart rsyslog 10. Modo de Performance gdown 1Roq8tn0COhY-OSrUy_YRNEQuZzdnM4Uu rpm -ivh set_performance-1.0-1.x86_64.rpm systemctl start set_performance.service systemctl enable set_performance.service function showTab(id) { document.querySelectorAll('.tab-content').forEach(e => e.classList.remove('active')); document.querySelectorAll('.tab-buttons button').forEach(b => b.classList.remove('active')); document.getElementById(id).classList.add('active'); event.target.classList.add('active'); }","title":"Configura\u00e7\u00e3o Sistema Operacional"},{"location":"erros.html","text":"Erros comuns Erros de importa\u00e7\u00e3o do imagem Erros de execu\u00e7\u00e3o","title":"Erros Comuns"},{"location":"erros.html#erros-comuns","text":"","title":"Erros comuns"},{"location":"erros.html#erros-de-importacao-do-imagem","text":"","title":"Erros de importa\u00e7\u00e3o do imagem"},{"location":"erros.html#erros-de-execucao","text":"","title":"Erros de execu\u00e7\u00e3o"},{"location":"execucao.html","text":"Execu\u00e7\u00e3o A execa\u00e7\u00e3o das vers\u00f5es acima da 3.0.0, se d\u00e3o exclusivamente pelas c\u00e2meras cadastradas no LPR Admin, depois de executar o pkplus-svc enable, \u00e9 necess\u00e1rio acompanhar nos Logs se a execu\u00e7\u00e3o foi autorizada, com base nas chaves que o WPS_LPR recebeu e no IP da VPN. Funcionamento do sistema WPS_LPR 1. O sistema assim que o container for liberado para execu\u00e7\u00e3o j\u00e1 estar\u00e1 funcionando com as c\u00e2meras cadastradas no LPR Admin, qualquer altera\u00e7\u00e3o no arquivo o sistema processar\u00e1 as altera\u00e7\u00f5es, e far\u00e1 a devida a\u00e7\u00e3o, que poder\u00e1 ser adicionar uma nova c\u00e2mera, remover uma c\u00e2mera, alterar algum par\u00e2metro de alguma c\u00e2mera: Consultando Logs do Sistema 2. As informa\u00e7\u00f5es do sistema WPS_LPR, poder\u00e3o ser consultadas pelo log journal , pelo comando: journalctl CONTAINER_TAG=ParkingPlus:WPS_LPR Oportunamente pode se passar o par\u00e2metro -f, para visualizar o log em tempo real. journalctl -f CONTAINER_TAG=ParkingPlus:WPS_LPR --output cat .code-block { font-size: 0.7em; /* Ajusta o tamanho da fonte */ white-space: pre-wrap; /* Permite quebras de linha no conte\u00fado pre */ } Exemplo de C\u00f3digo 3.1 A sa\u00edda do comando ser\u00e1 conforme abaixo: Clique para expandir 2000-01-01 00:00:54.033 | INFO: ENT_PRINC_3_FRONTAL | [SNAPSHOT] | Placa detectada: PRZ4B93 | Tipo de Ve\u00edculo: CAR | Marca/Modelo do Ve\u00edculo: VOLKSWAGEN - POLO 2000-01-01 00:00:54.525 | INFO: ENT_PRINC_2_FRONTAL | [SNAPSHOT] | Placa detectada: JIR0H44 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:01.109 | INFO: ENT_PRINC_1_FRONTAL | [SNAPSHOT] | Placa detectada: JJV7842 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:04.525 | INFO: ENT_PRINC_1_TRASEIRA | [SNAPSHOT] | Placa detectada: JJV7842 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:05.330 | INFO: ENT_PRINC_1_FRONTAL | [SNAPSHOT] | Placa detectada: JJV7842 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:08.327 | INFO: ENT_SUL_1_FRONTAL | [SNAPSHOT] | Placa detectada: PRO6225 | Tipo de Ve\u00edculo: CAR | Marca/Modelo do Ve\u00edculo: TOYOTA - YARIS 2000-01-01 00:01:11.355 | INFO: ENT_SUL_1_TRASEIRA | [SNAPSHOT] | Placa detectada: PRO6225 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:12.203 | INFO: ENT_SUL_1_FRONTAL | [SNAPSHOT] | Placa detectada: PRO6225 | Tipo de Ve\u00edculo: CAR | Marca/Modelo do Ve\u00edculo: TOYOTA - YARIS 2000-01-01 00:01:20.439 | INFO: ENT_TOK_STOK_2_FRONTAL | [SNAPSHOT] | Placa detectada: SDK5G47 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:33.051 | INFO: ENT_SUL_2_FRONTAL | [SNAPSHOT] | Placa detectada: SSG1C35 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:36.270 | INFO: ENT_SUL_2_TRASEIRA | [SNAPSHOT] | Placa detectada: SSG1C35 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:37.016 | INFO: ENT_SUL_2_FRONTAL | [SNAPSHOT] | Placa detectada: SSG1C35 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:38.034 | INFO: SAI_2_SUL_FRENTE | [SNAPSHOT] | Placa detectada: SYV8D43 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:41.138 | INFO: SAI_2_SUL_TRASEIRA | [SNAPSHOT] | Placa detectada: SYV8D43 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:41.974 | INFO: SAI_2_SUL_FRENTE | [SNAPSHOT] | Placa detectada: SYV8D43 | Tipo de Ve\u00edculo: CAR | Marca/Modelo do Ve\u00edculo: FIAT - ARGO 2000-01-01 00:01:42.363 | INFO: ENT_TOK_STOK_1_FRONTAL | [SNAPSHOT] | Placa detectada: SCQ1H08 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:46.859 | INFO: ENT_TOK_STOK_1_FRONTAL | [SNAPSHOT] | Placa detectada: SCQ1H08 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:47.560 | INFO: SAI_SUL_3_TRASEIRA | [SNAPSHOT] | Placa detectada: PQH2967 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:49.070 | INFO: SAI_SUL_3_FRONTAL | [SNAPSHOT] | Placa detectada: PQH2967 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:57.925 | INFO: ENT_PRINC_2_FRONTAL | [SNAPSHOT] | Placa detectada: NDO7C97 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:58.670 | INFO: ENT_3_NORTE_FRENTE | [SNAPSHOT] | Placa detectada: QUH3A03 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:59.684 | INFO: ENT_PRINC_2_TRASEIRA | [SNAPSHOT] | Placa detectada: NDO7C97 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:02:01.278 | INFO: ENT_3_NORTE_TRASEIRA | [SNAPSHOT] | Placa detectada: QUH3A03 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:03:28.210 | INFO: ENT_MOTO_1 | Frame n\u00famero: 705 | Placa: SCN3A36 | Confianca: 1.0 2000-01-01 00:03:29.215 | INFO: ENT_MOTO_1 | Frame n\u00famero: 706 | Placa: SCN3A36 | Confianca: 1.0 2000-01-01 00:03:30.218 | INFO: ENT_MOTO_1 | Frame n\u00famero: 707 | Placa: SCN3A36 | Confianca: 1.0 2000-01-01 00:03:31.224 | INFO: ENT_MOTO_1 | Frame n\u00famero: 708 | Placa: SCN3A36 | Confianca: 1.0 Alterando n\u00edvel de log 3. Para alterar o n\u00edvel de log, altere o arquivo: /var/lib/ParkingPlus/WpsLpr/config/settings.xml Caso o arquivo n\u00e3o exista, utilize o sample na pasta para cri\u00e1-lo, e altere o n\u00edvel caso seja necess\u00e1rio. O log vem configurado com n\u00edvel INFO , que exibe as informa\u00e7\u00f5es conforme acima, caso queira depurar alguma informa\u00e7\u00e3o, como o tempo gasto em cada etapa, altere para DEBUG ou TRACE , e ap\u00f3s as analises realizadas, retorne para INFO . <settings> <log_level>INFO</log_level> </settings> 4.1 A partir da vers\u00e3o 2.6.0 a mudan\u00e7a no n\u00edvel do LOG ser\u00e1 din\u00e2mica, ou seja ao alterar no arquivo o LOG j\u00e1 passar\u00e1 a exibir o LOG nesse n\u00edvel sem a necessidade de reiniciar a aplica\u00e7\u00e3o. Verificando c\u00e2meras online no sistema 4. Para verificar quantas e quais c\u00e2meras s\u00e3o, \u00e9 necess\u00e1rio fazer uma requisi\u00e7\u00e3o GET HTTP, no seguinte endpoint: http://ip_do_servidor_lpr:5000/api/v0/running_cameras 4.1 O retorno da requisi\u00e7\u00e3o ser\u00e1 algo do tipo: Clique para expandir { \"Cameras online\": { \"LPR\": [ \"ENT_MOTO_2 - 192.168.8.127 (Online)\", \"SAI_MOTO_1 - 192.168.8.143 (Online)\", \"SAI_MOTO_2 - 192.168.8.144 (Online)\", \"ENT_MOTO_1 - 192.168.8.126 (Online)\" ], \"WPS 360\": [ \"ENT_PRINC_2_TRASEIRA - 192.168.20.199 (Online)\", \"ENT_PRINC_3_TRASEIRA - 192.168.20.190 (Online)\", ... \"SAI_SUL_3_FRONTAL - 192.168.20.196 (Online)\", \"SAI_PRINC_3_FRONTAL - 192.168.20.219 (Online)\" ] }, \"Total de cameras online\": 54, \"Cameras offline\": { \"WPS 360\": [ \"SAI_LOJISTA_FRONTAL - 192.168.20.38 (Offline)\", \"ENT_LOJISTA_TRASEIRA - 192.168.20.112 (Offline)\" ] }, \"Total de cameras offline\": 2 } Solicitando um snapshot de uma c\u00e2mera 5. Para solicitar um snapshot, \u00e9 necess\u00e1rio fazer uma requisi\u00e7\u00e3o GET HTTP, no seguinte endpoint: http://ip_do_servidor_lpr:5000/api/v0/snapshot 5.1 \u00c9 necess\u00e1rio passar tamb\u00e9m o argumento wps_topic , exemplo: http://127.0.0.1:5000/api/v0/snapshot?wps_topic=TESTE O sistema retornar\u00e1 imediatamente a \u00faltima imagem salva em buffer referente ao wps_topic fornecido. Segue um exemplo de resposta da solicita\u00e7\u00e3o enviada: { \"timestamp\": timestamp, \"object_type\": object_type, \"imagem\": { \"data\": snapshot_lpr, \"type\": \"image/jpg\", } } As imagens est\u00e3o codificadas em base64, com resolu\u00e7\u00e3o 1280x720 e formato JPG. Verificando quantidade de Threads 6. Para verificar quantas threads do sistema WPS_LPR est\u00e3o ativas, basta fazer uma requisi\u00e7\u00e3o GET HTTP no endpoint abaixo: http://ip_do_servidor_lpr:5000/api/v0/threads O retorno ser\u00e1 a quantidade de threads em execu\u00e7\u00e3o, usado para DEBUG. 6.1 Para verificar o nome das threads em execu\u00e7\u00e3o no sistema WPS_LPR, fa\u00e7a uma requisi\u00e7\u00e3o GET HTTP no endpoint: http://ip_do_servidor_lpr:5000/api/v0/threads_details O retorno ser\u00e1 o detalhamento das threads, para ajudar no processo de DEBUG. Clique para expandir { \"thread_details\": [ { \"name\": \"MainThread\", \"id\": 139885484580992 }, { \"name\": \"MonitorLogLevel\", \"id\": 139885465700032 }, { \"name\": \"pymongo_server_monitor_thread\", \"id\": 139883041511104 }, { \"name\": \"pymongo_kill_cursors_thread\", \"id\": 139883145090752 }, { \"name\": \"pymongo_server_rtt_thread\", \"id\": 139882454316736 }, { \"name\": \"Inotify (InotifyBuffer)\", \"id\": 139884727596736 }, { \"name\": \"Inotify (InotifyEmitter)\", \"id\": 139884735989440 }, { \"name\": \"Inotify (InotifyObserver)\", \"id\": 139884878599872 }, { \"name\": \"JSON monitoring\", \"id\": 139884886992576 }, { \"name\": \"Webserver WPS_LPR\", \"id\": 139885328078528 }, { \"name\": \"Schedule\", \"id\": 139885319685824 }, { \"name\": \"ThreadPoolExecutor-3_0\", \"id\": 139885172213440 }, { \"name\": \"ThreadPoolExecutor-3_1\", \"id\": 139884895385280 }, { \"name\": \"ThreadPoolExecutor-3_2\", \"id\": 139883058296512 }, { \"name\": \"ThreadPoolExecutor-3_3\", \"id\": 139883049903808 }, { \"name\": \"MQTT: SAI_MOTO_1\", \"id\": 139875802146496 }, { \"name\": \"MQTT: ENT_MOTO_1\", \"id\": 139880675927744 }, { \"name\": \"MQTT: ENT_MOTO_2\", \"id\": 139878863976128 }, { \"name\": \"Thread-826\", \"id\": 139878880761536 } ], \"thread_types\": { \"MainThread\": 1, \"Daemon Threads\": 8, \"ThreadPoolExecutor\": 4, \"Inotify\": 3, \"Others\": 3 }, \"total_active_threads\": 19 } Exibindo a vers\u00e3o do WPS_LPR 7. Para verificar a vers\u00e3o do sistema, fa\u00e7a uma requisi\u00e7\u00e3o GET HTTP no endpoint abaixo: http://ip_do_servidor_lpr:5000/api/v0/version { \"version\": \"2.9.0\" } Verificando as conex\u00f5es no WPS_LPR 8. Para verificar todas as conex\u00f5es configuradas no sistema WPS_LPR, fa\u00e7a uma requisi\u00e7\u00e3o GET HTTP no endpoint: http://ip_do_servidor_lpr:5000/api/v0/connections O retorno ser\u00e1 a listagem das conex\u00f5es configuradas no sistema. Clique para expandir { \"lpr\": [ { \"camera_id\": \"1\", \"wps_topic\": \"ENT_MOTO_1\", \"camera_ip\": \"192.168.8.126\", \"ocr_time\": \"1/seg\", \"ocr_mode\": \"Moto\", \"publish_interval\": \"1000 ms\" }, { \"camera_id\": \"2\", \"wps_topic\": \"ENT_MOTO_2\", \"camera_ip\": \"192.168.8.127\", \"ocr_time\": \"1/seg\", \"ocr_mode\": \"Moto\", \"publish_interval\": \"1000 ms\" }, { \"camera_id\": \"3\", \"wps_topic\": \"SAI_MOTO_1\", \"camera_ip\": \"192.168.8.143\", \"ocr_time\": \"1/seg\", \"ocr_mode\": \"Moto\", \"publish_interval\": \"1000 ms\" }, { \"camera_id\": \"4\", \"wps_topic\": \"SAI_MOTO_2\", \"camera_ip\": \"192.168.8.144\", \"ocr_time\": \"1/seg\", \"ocr_mode\": \"Moto\", \"publish_interval\": \"1000 ms\" } ], \"context\": [ { \"camera_id\": \"5\", \"wps_topic\": \"ENT_PRINC_1_FRONTAL\", \"camera_ip\": \"192.168.20.193\", \"ocr_time\": \"1/seg\", \"ocr_mode\": \"Carro\", \"publish_interval\": \"1000 ms\" }, ... { \"camera_id\": \"55\", \"wps_topic\": \"SAI_2_SUL_FRENTE\", \"camera_ip\": \"192.168.20.225\", \"ocr_time\": \"0/seg\", \"ocr_mode\": \"Carro\", \"publish_interval\": \"0 ms\" }, { \"camera_id\": \"56\", \"wps_topic\": \"SAI_2_SUL_TRASEIRA\", \"camera_ip\": \"192.168.20.195\", \"ocr_time\": \"1/seg\", \"ocr_mode\": \"Carro e Moto\", \"publish_interval\": \"1000 ms\" } ] } Reiniciando a aplica\u00e7\u00e3o 9. Para reiniciar o sistema WPS_LPR, utilize o endpoint abaixo: http://ip_do_servidor_lpr:5000/api/v0/reboot_wpslpr Verificando vagas do modo Segmentation 10. Para obter a lista das vagas monitoradas pelas c\u00e2meras do tipo \" segmentation \": http://ip_do_servidor_lpr:5000/general/spaces O sistema retornar\u00e1 algo como: { \"id\": 1, \"name\": WPS_LPR Vaga 1\", \"sectorId\": 1, \"sectorName\": WPS, \"levelId\": 1, \"levelName\": G1, \"parkingId\": 1, \"parkingName\": WPS G1, \"tariffZone\": 1, \"disabled\": False, \"handicap\": False, \"xCoord\": 0, \"yCoord\": 0 } 11. Para obter uma atualiza\u00e7\u00e3o das vagas monitoradas pelas c\u00e2meras do tipo \" segmentation \": http://ip_do_servidor_lpr:5000/parkingSpaces/status/x Onde \" x \" \u00e9 o tempo em segundos considerados para a consulta Obtendo a placa com o modo Rekognition 12. Para submeter uma imagem \u00fanica para reconhecer a placa, utilize o m\u00e9todo \" rekognition \" http://ip_do_servidor_lpr:5000/api/v0/rekognition A imagem pode estar nas extens\u00f5es, bmp , jpg ou png , tamb\u00e9m \u00e9 aceito em base64 . Para enviar, utilize o m\u00e9todo POST, no corpo da mensagem coloque image na key , e a imagem que quer submeter em value . O retorno da solicita\u00e7\u00e3o ser\u00e1 o seguinte: Exemplo de requisi\u00e7\u00e3o com curl curl -X POST http://ip_do_servidor_lpr:5000/api/v0/rekognition \\ -F \"image=@image.jpg\" { \"timestamp\": \"2024-11-07 14:47:28.931\", \"object_type\": \"CAR\", \"coor_object\": { \"xmin\": 183, \"xmax\": 857, \"ymin\": 171, \"ymax\": 558 }, \"plate_number\": \"SDH1I20\", \"confidence\": 1.0, \"car_model\": \"RAM - rampage\" }","title":"Execu\u00e7\u00e3o"},{"location":"execucao.html#execucao","text":"A execa\u00e7\u00e3o das vers\u00f5es acima da 3.0.0, se d\u00e3o exclusivamente pelas c\u00e2meras cadastradas no LPR Admin, depois de executar o pkplus-svc enable, \u00e9 necess\u00e1rio acompanhar nos Logs se a execu\u00e7\u00e3o foi autorizada, com base nas chaves que o WPS_LPR recebeu e no IP da VPN.","title":"Execu\u00e7\u00e3o"},{"location":"execucao.html#funcionamento-do-sistema-wps_lpr","text":"1. O sistema assim que o container for liberado para execu\u00e7\u00e3o j\u00e1 estar\u00e1 funcionando com as c\u00e2meras cadastradas no LPR Admin, qualquer altera\u00e7\u00e3o no arquivo o sistema processar\u00e1 as altera\u00e7\u00f5es, e far\u00e1 a devida a\u00e7\u00e3o, que poder\u00e1 ser adicionar uma nova c\u00e2mera, remover uma c\u00e2mera, alterar algum par\u00e2metro de alguma c\u00e2mera:","title":"Funcionamento do sistema WPS_LPR"},{"location":"execucao.html#consultando-logs-do-sistema","text":"2. As informa\u00e7\u00f5es do sistema WPS_LPR, poder\u00e3o ser consultadas pelo log journal , pelo comando: journalctl CONTAINER_TAG=ParkingPlus:WPS_LPR Oportunamente pode se passar o par\u00e2metro -f, para visualizar o log em tempo real. journalctl -f CONTAINER_TAG=ParkingPlus:WPS_LPR --output cat .code-block { font-size: 0.7em; /* Ajusta o tamanho da fonte */ white-space: pre-wrap; /* Permite quebras de linha no conte\u00fado pre */ } Exemplo de C\u00f3digo 3.1 A sa\u00edda do comando ser\u00e1 conforme abaixo: Clique para expandir 2000-01-01 00:00:54.033 | INFO: ENT_PRINC_3_FRONTAL | [SNAPSHOT] | Placa detectada: PRZ4B93 | Tipo de Ve\u00edculo: CAR | Marca/Modelo do Ve\u00edculo: VOLKSWAGEN - POLO 2000-01-01 00:00:54.525 | INFO: ENT_PRINC_2_FRONTAL | [SNAPSHOT] | Placa detectada: JIR0H44 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:01.109 | INFO: ENT_PRINC_1_FRONTAL | [SNAPSHOT] | Placa detectada: JJV7842 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:04.525 | INFO: ENT_PRINC_1_TRASEIRA | [SNAPSHOT] | Placa detectada: JJV7842 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:05.330 | INFO: ENT_PRINC_1_FRONTAL | [SNAPSHOT] | Placa detectada: JJV7842 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:08.327 | INFO: ENT_SUL_1_FRONTAL | [SNAPSHOT] | Placa detectada: PRO6225 | Tipo de Ve\u00edculo: CAR | Marca/Modelo do Ve\u00edculo: TOYOTA - YARIS 2000-01-01 00:01:11.355 | INFO: ENT_SUL_1_TRASEIRA | [SNAPSHOT] | Placa detectada: PRO6225 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:12.203 | INFO: ENT_SUL_1_FRONTAL | [SNAPSHOT] | Placa detectada: PRO6225 | Tipo de Ve\u00edculo: CAR | Marca/Modelo do Ve\u00edculo: TOYOTA - YARIS 2000-01-01 00:01:20.439 | INFO: ENT_TOK_STOK_2_FRONTAL | [SNAPSHOT] | Placa detectada: SDK5G47 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:33.051 | INFO: ENT_SUL_2_FRONTAL | [SNAPSHOT] | Placa detectada: SSG1C35 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:36.270 | INFO: ENT_SUL_2_TRASEIRA | [SNAPSHOT] | Placa detectada: SSG1C35 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:37.016 | INFO: ENT_SUL_2_FRONTAL | [SNAPSHOT] | Placa detectada: SSG1C35 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:38.034 | INFO: SAI_2_SUL_FRENTE | [SNAPSHOT] | Placa detectada: SYV8D43 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:41.138 | INFO: SAI_2_SUL_TRASEIRA | [SNAPSHOT] | Placa detectada: SYV8D43 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:41.974 | INFO: SAI_2_SUL_FRENTE | [SNAPSHOT] | Placa detectada: SYV8D43 | Tipo de Ve\u00edculo: CAR | Marca/Modelo do Ve\u00edculo: FIAT - ARGO 2000-01-01 00:01:42.363 | INFO: ENT_TOK_STOK_1_FRONTAL | [SNAPSHOT] | Placa detectada: SCQ1H08 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:46.859 | INFO: ENT_TOK_STOK_1_FRONTAL | [SNAPSHOT] | Placa detectada: SCQ1H08 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:47.560 | INFO: SAI_SUL_3_TRASEIRA | [SNAPSHOT] | Placa detectada: PQH2967 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:49.070 | INFO: SAI_SUL_3_FRONTAL | [SNAPSHOT] | Placa detectada: PQH2967 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:57.925 | INFO: ENT_PRINC_2_FRONTAL | [SNAPSHOT] | Placa detectada: NDO7C97 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:58.670 | INFO: ENT_3_NORTE_FRENTE | [SNAPSHOT] | Placa detectada: QUH3A03 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:01:59.684 | INFO: ENT_PRINC_2_TRASEIRA | [SNAPSHOT] | Placa detectada: NDO7C97 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:02:01.278 | INFO: ENT_3_NORTE_TRASEIRA | [SNAPSHOT] | Placa detectada: QUH3A03 | Tipo de Ve\u00edculo: CAR 2000-01-01 00:03:28.210 | INFO: ENT_MOTO_1 | Frame n\u00famero: 705 | Placa: SCN3A36 | Confianca: 1.0 2000-01-01 00:03:29.215 | INFO: ENT_MOTO_1 | Frame n\u00famero: 706 | Placa: SCN3A36 | Confianca: 1.0 2000-01-01 00:03:30.218 | INFO: ENT_MOTO_1 | Frame n\u00famero: 707 | Placa: SCN3A36 | Confianca: 1.0 2000-01-01 00:03:31.224 | INFO: ENT_MOTO_1 | Frame n\u00famero: 708 | Placa: SCN3A36 | Confianca: 1.0","title":"Consultando Logs do Sistema"},{"location":"execucao.html#alterando-nivel-de-log","text":"3. Para alterar o n\u00edvel de log, altere o arquivo: /var/lib/ParkingPlus/WpsLpr/config/settings.xml Caso o arquivo n\u00e3o exista, utilize o sample na pasta para cri\u00e1-lo, e altere o n\u00edvel caso seja necess\u00e1rio. O log vem configurado com n\u00edvel INFO , que exibe as informa\u00e7\u00f5es conforme acima, caso queira depurar alguma informa\u00e7\u00e3o, como o tempo gasto em cada etapa, altere para DEBUG ou TRACE , e ap\u00f3s as analises realizadas, retorne para INFO . <settings> <log_level>INFO</log_level> </settings> 4.1 A partir da vers\u00e3o 2.6.0 a mudan\u00e7a no n\u00edvel do LOG ser\u00e1 din\u00e2mica, ou seja ao alterar no arquivo o LOG j\u00e1 passar\u00e1 a exibir o LOG nesse n\u00edvel sem a necessidade de reiniciar a aplica\u00e7\u00e3o.","title":"Alterando n\u00edvel de log"},{"location":"execucao.html#verificando-cameras-online-no-sistema","text":"4. Para verificar quantas e quais c\u00e2meras s\u00e3o, \u00e9 necess\u00e1rio fazer uma requisi\u00e7\u00e3o GET HTTP, no seguinte endpoint: http://ip_do_servidor_lpr:5000/api/v0/running_cameras 4.1 O retorno da requisi\u00e7\u00e3o ser\u00e1 algo do tipo: Clique para expandir { \"Cameras online\": { \"LPR\": [ \"ENT_MOTO_2 - 192.168.8.127 (Online)\", \"SAI_MOTO_1 - 192.168.8.143 (Online)\", \"SAI_MOTO_2 - 192.168.8.144 (Online)\", \"ENT_MOTO_1 - 192.168.8.126 (Online)\" ], \"WPS 360\": [ \"ENT_PRINC_2_TRASEIRA - 192.168.20.199 (Online)\", \"ENT_PRINC_3_TRASEIRA - 192.168.20.190 (Online)\", ... \"SAI_SUL_3_FRONTAL - 192.168.20.196 (Online)\", \"SAI_PRINC_3_FRONTAL - 192.168.20.219 (Online)\" ] }, \"Total de cameras online\": 54, \"Cameras offline\": { \"WPS 360\": [ \"SAI_LOJISTA_FRONTAL - 192.168.20.38 (Offline)\", \"ENT_LOJISTA_TRASEIRA - 192.168.20.112 (Offline)\" ] }, \"Total de cameras offline\": 2 }","title":"Verificando c\u00e2meras online no sistema"},{"location":"execucao.html#solicitando-um-snapshot-de-uma-camera","text":"5. Para solicitar um snapshot, \u00e9 necess\u00e1rio fazer uma requisi\u00e7\u00e3o GET HTTP, no seguinte endpoint: http://ip_do_servidor_lpr:5000/api/v0/snapshot 5.1 \u00c9 necess\u00e1rio passar tamb\u00e9m o argumento wps_topic , exemplo: http://127.0.0.1:5000/api/v0/snapshot?wps_topic=TESTE O sistema retornar\u00e1 imediatamente a \u00faltima imagem salva em buffer referente ao wps_topic fornecido. Segue um exemplo de resposta da solicita\u00e7\u00e3o enviada: { \"timestamp\": timestamp, \"object_type\": object_type, \"imagem\": { \"data\": snapshot_lpr, \"type\": \"image/jpg\", } } As imagens est\u00e3o codificadas em base64, com resolu\u00e7\u00e3o 1280x720 e formato JPG.","title":"Solicitando um snapshot de uma c\u00e2mera"},{"location":"execucao.html#verificando-quantidade-de-threads","text":"6. Para verificar quantas threads do sistema WPS_LPR est\u00e3o ativas, basta fazer uma requisi\u00e7\u00e3o GET HTTP no endpoint abaixo: http://ip_do_servidor_lpr:5000/api/v0/threads O retorno ser\u00e1 a quantidade de threads em execu\u00e7\u00e3o, usado para DEBUG. 6.1 Para verificar o nome das threads em execu\u00e7\u00e3o no sistema WPS_LPR, fa\u00e7a uma requisi\u00e7\u00e3o GET HTTP no endpoint: http://ip_do_servidor_lpr:5000/api/v0/threads_details O retorno ser\u00e1 o detalhamento das threads, para ajudar no processo de DEBUG. Clique para expandir { \"thread_details\": [ { \"name\": \"MainThread\", \"id\": 139885484580992 }, { \"name\": \"MonitorLogLevel\", \"id\": 139885465700032 }, { \"name\": \"pymongo_server_monitor_thread\", \"id\": 139883041511104 }, { \"name\": \"pymongo_kill_cursors_thread\", \"id\": 139883145090752 }, { \"name\": \"pymongo_server_rtt_thread\", \"id\": 139882454316736 }, { \"name\": \"Inotify (InotifyBuffer)\", \"id\": 139884727596736 }, { \"name\": \"Inotify (InotifyEmitter)\", \"id\": 139884735989440 }, { \"name\": \"Inotify (InotifyObserver)\", \"id\": 139884878599872 }, { \"name\": \"JSON monitoring\", \"id\": 139884886992576 }, { \"name\": \"Webserver WPS_LPR\", \"id\": 139885328078528 }, { \"name\": \"Schedule\", \"id\": 139885319685824 }, { \"name\": \"ThreadPoolExecutor-3_0\", \"id\": 139885172213440 }, { \"name\": \"ThreadPoolExecutor-3_1\", \"id\": 139884895385280 }, { \"name\": \"ThreadPoolExecutor-3_2\", \"id\": 139883058296512 }, { \"name\": \"ThreadPoolExecutor-3_3\", \"id\": 139883049903808 }, { \"name\": \"MQTT: SAI_MOTO_1\", \"id\": 139875802146496 }, { \"name\": \"MQTT: ENT_MOTO_1\", \"id\": 139880675927744 }, { \"name\": \"MQTT: ENT_MOTO_2\", \"id\": 139878863976128 }, { \"name\": \"Thread-826\", \"id\": 139878880761536 } ], \"thread_types\": { \"MainThread\": 1, \"Daemon Threads\": 8, \"ThreadPoolExecutor\": 4, \"Inotify\": 3, \"Others\": 3 }, \"total_active_threads\": 19 }","title":"Verificando quantidade de Threads"},{"location":"execucao.html#exibindo-a-versao-do-wps_lpr","text":"7. Para verificar a vers\u00e3o do sistema, fa\u00e7a uma requisi\u00e7\u00e3o GET HTTP no endpoint abaixo: http://ip_do_servidor_lpr:5000/api/v0/version { \"version\": \"2.9.0\" }","title":"Exibindo a vers\u00e3o do WPS_LPR"},{"location":"execucao.html#verificando-as-conexoes-no-wps_lpr","text":"8. Para verificar todas as conex\u00f5es configuradas no sistema WPS_LPR, fa\u00e7a uma requisi\u00e7\u00e3o GET HTTP no endpoint: http://ip_do_servidor_lpr:5000/api/v0/connections O retorno ser\u00e1 a listagem das conex\u00f5es configuradas no sistema. Clique para expandir { \"lpr\": [ { \"camera_id\": \"1\", \"wps_topic\": \"ENT_MOTO_1\", \"camera_ip\": \"192.168.8.126\", \"ocr_time\": \"1/seg\", \"ocr_mode\": \"Moto\", \"publish_interval\": \"1000 ms\" }, { \"camera_id\": \"2\", \"wps_topic\": \"ENT_MOTO_2\", \"camera_ip\": \"192.168.8.127\", \"ocr_time\": \"1/seg\", \"ocr_mode\": \"Moto\", \"publish_interval\": \"1000 ms\" }, { \"camera_id\": \"3\", \"wps_topic\": \"SAI_MOTO_1\", \"camera_ip\": \"192.168.8.143\", \"ocr_time\": \"1/seg\", \"ocr_mode\": \"Moto\", \"publish_interval\": \"1000 ms\" }, { \"camera_id\": \"4\", \"wps_topic\": \"SAI_MOTO_2\", \"camera_ip\": \"192.168.8.144\", \"ocr_time\": \"1/seg\", \"ocr_mode\": \"Moto\", \"publish_interval\": \"1000 ms\" } ], \"context\": [ { \"camera_id\": \"5\", \"wps_topic\": \"ENT_PRINC_1_FRONTAL\", \"camera_ip\": \"192.168.20.193\", \"ocr_time\": \"1/seg\", \"ocr_mode\": \"Carro\", \"publish_interval\": \"1000 ms\" }, ... { \"camera_id\": \"55\", \"wps_topic\": \"SAI_2_SUL_FRENTE\", \"camera_ip\": \"192.168.20.225\", \"ocr_time\": \"0/seg\", \"ocr_mode\": \"Carro\", \"publish_interval\": \"0 ms\" }, { \"camera_id\": \"56\", \"wps_topic\": \"SAI_2_SUL_TRASEIRA\", \"camera_ip\": \"192.168.20.195\", \"ocr_time\": \"1/seg\", \"ocr_mode\": \"Carro e Moto\", \"publish_interval\": \"1000 ms\" } ] }","title":"Verificando as conex\u00f5es no WPS_LPR"},{"location":"execucao.html#reiniciando-a-aplicacao","text":"9. Para reiniciar o sistema WPS_LPR, utilize o endpoint abaixo: http://ip_do_servidor_lpr:5000/api/v0/reboot_wpslpr","title":"Reiniciando a aplica\u00e7\u00e3o"},{"location":"execucao.html#verificando-vagas-do-modo-segmentation","text":"10. Para obter a lista das vagas monitoradas pelas c\u00e2meras do tipo \" segmentation \": http://ip_do_servidor_lpr:5000/general/spaces O sistema retornar\u00e1 algo como: { \"id\": 1, \"name\": WPS_LPR Vaga 1\", \"sectorId\": 1, \"sectorName\": WPS, \"levelId\": 1, \"levelName\": G1, \"parkingId\": 1, \"parkingName\": WPS G1, \"tariffZone\": 1, \"disabled\": False, \"handicap\": False, \"xCoord\": 0, \"yCoord\": 0 } 11. Para obter uma atualiza\u00e7\u00e3o das vagas monitoradas pelas c\u00e2meras do tipo \" segmentation \": http://ip_do_servidor_lpr:5000/parkingSpaces/status/x Onde \" x \" \u00e9 o tempo em segundos considerados para a consulta","title":"Verificando vagas do modo Segmentation"},{"location":"execucao.html#obtendo-a-placa-com-o-modo-rekognition","text":"12. Para submeter uma imagem \u00fanica para reconhecer a placa, utilize o m\u00e9todo \" rekognition \" http://ip_do_servidor_lpr:5000/api/v0/rekognition A imagem pode estar nas extens\u00f5es, bmp , jpg ou png , tamb\u00e9m \u00e9 aceito em base64 . Para enviar, utilize o m\u00e9todo POST, no corpo da mensagem coloque image na key , e a imagem que quer submeter em value . O retorno da solicita\u00e7\u00e3o ser\u00e1 o seguinte:","title":"Obtendo a placa com o modo Rekognition"},{"location":"instalacao.html","text":"Configura\u00e7\u00e3o ParkingPlus-WPS_LPR Pr\u00e9-Requisitos Sistema operacional instalado e configurado. Docker do MQTT importado e em execu\u00e7\u00e3o. wps-ip-notifier Instalado VPN apontando para o LPR Admin LPR-Stream-Provider instalado e configurado Instala\u00e7\u00e3o Nesta etapa considera que todas as demais depend\u00eancias do Sistema Operacional escolhido j\u00e1 foram devidamente instaladas, para consultar quais s\u00e3o elas e o procedimento de instala\u00e7\u00e3o v\u00e1 at\u00e9 a se\u00e7\u00e3o Configura\u00e7\u00e3o Sistema Operacional . Siga estas etapas para configurar o ambiente de desenvolvimento e executar o container com o sistema WPS_LPR: Vers\u00e2o Atual: \"3.2.0\" Baixe a imagem ParkingPlus:WPS_LPR mais recente dispon\u00edvel no resposit\u00f3rio. Arquivos: - ParkingPlus-WPSLPR-3.2.0_gpu.tgz - ParkingPlus-WPSLPR-3.2.0_cpu.tgz :root { --primary-color: #ff5722; } [data-md-color-scheme=\"default\"] { --tab-bg: #f9f9f9; --tab-hover: #eeeeee; --tab-active: var(--primary-color); --tab-content-bg: #fefefe; --tab-border: #ddd; --tab-text: #333; --tab-active-text: white; --bash-bg: #f0f0f0; --bash-text: #333; --bash-green: #2e7d32; } [data-md-color-scheme=\"slate\"] { --tab-bg: #2e2e2e; --tab-hover: #3a3a3a; --tab-active: var(--primary-color); --tab-content-bg: #1f1f1f; --tab-border: #444; --tab-text: #eee; --tab-active-text: white; --bash-bg: #1e1e1e; --bash-text: #eee; --bash-green: #66bb6a; } .tab { overflow: hidden; margin-bottom: 0; } .tab button { background-color: var(--tab-bg); border: none; outline: none; padding: 10px 24px; cursor: pointer; transition: 0.3s; font-size: 12px; color: var(--tab-text); border-radius: 6px; } .tab button:hover { background-color: var(--tab-hover); } .tab button.active { background-color: var(--tab-active); color: var(--tab-active-text); } .tabcontent-platform, .tabcontent-system { display: none; padding: 2px; border-radius: 0 0 6px 6px; color: var(--tab-text); margin-bottom: 1rem; } .tabcontent-platform pre, .tabcontent-system pre { background-color: #272822; color: #f8f8f2; padding: 2px; border-radius: 6px; overflow-x: auto; } .bash-output { background-color: var(--bash-bg); color: var(--bash-text); padding: 1em; border-radius: 6px; font-family: monospace; font-size: 14px; overflow-x: auto; white-space: pre-wrap; } .bash-output .service { color: var(--bash-green); font-weight: bold; } .bash-output .active { color: var(--bash-green); font-weight: bold; } .bash-output .enabled { color: var(--bash-green); } function openTabSystemA(evt, tabName) { var i, tabcontent, tablinks; tabcontent = document.getElementsByClassName(\"tabcontent-system-A\"); for (i = 0; i < tabcontent.length; i++) { tabcontent[i].style.display = \"none\"; } tablinks = document.getElementsByClassName(\"tablinks-system-A\"); for (i = 0; i < tablinks.length; i++) { tablinks[i].className = tablinks[i].className.replace(\" active\", \"\"); } document.getElementById(tabName).style.display = \"block\"; evt.currentTarget.className += \" active\"; } function openTabSystemB(evt, tabName) { var i, tabcontent, tablinks; tabcontent = document.getElementsByClassName(\"tabcontent-system-B\"); for (i = 0; i < tabcontent.length; i++) { tabcontent[i].style.display = \"none\"; } tablinks = document.getElementsByClassName(\"tablinks-system-B\"); for (i = 0; i < tablinks.length; i++) { tablinks[i].className = tablinks[i].className.replace(\" active\", \"\"); } document.getElementById(tabName).style.display = \"block\"; evt.currentTarget.className += \" active\"; } document.addEventListener(\"DOMContentLoaded\", function () { document.getElementById(\"defaultSystem\")?.click(); // Grupo A document.getElementById(\"defaultSystem2\")?.click(); // Grupo B }); Configura\u00e7\u00e3o da VPN para o LPR Admin Ubuntu CentOS 7 Instale o OpenVPN: apt-get update apt install openvpn Coloque os arquivos da VPN em: /etc/openvpn Configure o arquivo .conf conforme necess\u00e1rio: nano /etc/openvpn/client_cameras_vnc.conf Inicie a VPN: systemctl start openvpn@client_cameras_vnc Verifique o status: systemctl status openvpn@client_cameras_vnc Instale o OpenVPN: yum install openvpn Coloque os arquivos da VPN em: /etc/openvpn Configure o arquivo .conf conforme necess\u00e1rio: nano /etc/openvpn/client_cameras_vnc.conf Inicie a VPN: systemctl start openvpn@client_cameras_vnc Verifique o status: systemctl status openvpn@client_cameras_vnc Instala\u00e7\u00e3o do LPR-Stream-Provider Baixe o pacote da vers\u00e3o mais atual: https://intranet.parkingplus.com.br/pub/Parking%20Plus/LPR/lpr-stream-provider/3.0.15/lpr-stream-provider-3.0.15.tgz Importe o servi\u00e7o usando o pkplus-cli : pkplus-cli svc import-file lpr-stream-provider-3.0.15.tgz Habilite o servi\u00e7o LPR-Stream-Provider : pkplus-cli svc enable WPS_LPR:lpr-stream-provider:3.0.15 Configure o car_park da garagem no arquivo de configura\u00e7\u00e3o: /etc/ParkingPlus/lpr-stream-provider/config/default.json Abra o arquivo em um editor de sua prefer\u00eancia e ajuste os campos car_park_id car_park_username car_park_password conforme necess\u00e1rio. Exemplo de default.json { \"app\": { \"port\": 3000, \"car_park_id\": \"1cbcba85-f10f-452f-b025-3a96b3c33638\", \"config_place\": \"cloud\", \"car_park_username\": \"622c8cad-ea27-4666-acee-f81c5c8ecaa2\", \"car_park_password\": \"977c9ed0be6ca29f7be9a114e5235fb303035c1c17c85fc75b85d67756263f84\" }, \"camera\": { \"region\": \"brazil\", \"config_path\": \"/var/lib/ParkingPlus/WpsLpr/config\", \"config_file_name\": \"config.json\", \"video_codec\": \"libx265\", \"frame-rate\": 0, \"delete_json\": false }, \"logger\": { \"enabled\": true, \"level\": \"trace\", \"type\": \"console\", \"path\": \"/var/opt\" }, \"brokerMQTT\": { \"url\": \"mqtt://192.168.135.158:1883\", \"user\": \"wps\", \"password\": \"wps@2021\" }, \"lpr_svc_api_url\": \"https://lprapi.dev.wpsenterprise.com.br\", \"parkingplus_wps_lpr_url\": \"http://127.0.0.1:5000\", \"schedules\": { \"status_update\": { \"enabled\": true, \"expression\": \"0 */1 * * * *\", \"name\": \"Camera Status Update\" }, \"config_update\": { \"enabled\": false, \"expression\": \"0 */1 * * * *\", \"name\": \"Config Update\" } } } Arquivos GPU CPU https://intranet.parkingplus.com.br/pub/Parking%20Plus/LPR/WpsLpr/3.2.0/ParkingPlus-WPSLPR-3.2.0_gpu.tgz https://intranet.parkingplus.com.br/pub/Parking%20Plus/LPR/WpsLpr/3.2.0/ParkingPlus-WPSLPR-3.2.0_cpu.tgz Instala\u00e7\u00e3o de pacotes necess\u00e1rios e carregamento da imagem Ubuntu CentOS 7 Instale o wps-ip-notifier https://intranet.parkingplus.com.br/pub/Parking%20Plus/LPR/services/1.0.3/wps-ip-notifier-1.0.3-1.deb apt install ./wps-ip-notifier-1.0.3-1.deb Confira a instala\u00e7\u00e3o systemctl status wps-ip-notifier.service Verifica\u00e7\u00e3o do servi\u00e7o Confira se o servi\u00e7o est\u00e1 rodando e se est\u00e1 habilitado para iniciar automaticamente com o sistema. Caso n\u00e3o esteja rodando , execute o comando abaixo para acompanhar os logs em tempo real: journalctl -u wps-ip-notifier -f \u25cf wps-ip-notifier.service - WPS IP Notifier Service Loaded: loaded (/etc/systemd/system/wps-ip-notifier.service; enabled ; vendor preset: enabled ) Active: active (running) since Tue 2025-07-22 09:43:12 -03; 22h ago Main PID: 2028 (wps_ip_notifier) Tasks: 3 (limit: 38016) Memory: 316.0K CPU: 58.979s CGroup: /system.slice/wps-ip-notifier.service \u2514\u25002028 /usr/local/bin/wps_ip_notifier Instale o python3.11 sudo apt install python3.11 Instale o pkplus-cli wget https://intranet.parkingplus.com.br/pub/Parking%20Plus/pkplus-cli/3.0.0/pkplus-cli_3.0.0-1_all.deb \\ --http-user='seu_usuario' \\ --ask-password apt install ./pkplus-cli_3.0.0-1_all.deb mkdir -p /var/lib/pkplus-svc Carregue a imagem com o pkplus-cli pkplus-cli svc import-file /instalacoes/ParkingPlus-WPSLPR-3.2.0.tgz Ap\u00f3s a importa\u00e7\u00e3o inicie a imagem com o pkplus-cli pkplus-cli svc enable ParkingPlus:WPS_LPR:3.2.0 Instale o wps-ip-notifier https://intranet.parkingplus.com.br/pub/Parking%20Plus/LPR/services/1.0.3/wps-ip-notifier-1.0.3-1.el7.x86_64.rpm yum localinstall wps-ip-notifier-1.0.3-1.el7.x86_64.rpm Confira a instala\u00e7\u00e3o systemctl status wps-ip-notifier.service Verifica\u00e7\u00e3o do servi\u00e7o Confira se o servi\u00e7o est\u00e1 rodando e se est\u00e1 habilitado para iniciar automaticamente com o sistema. Caso n\u00e3o esteja rodando , execute o comando abaixo para acompanhar os logs em tempo real: journalctl -u wps-ip-notifier -f \u25cf wps-ip-notifier.service - WPS IP Notifier Service Loaded: loaded (/etc/systemd/system/wps-ip-notifier.service; enabled ; vendor preset: enabled ) Active: active (running) since Tue 2025-07-22 09:43:12 -03; 22h ago Main PID: 2028 (wps_ip_notifier) Tasks: 3 (limit: 38016) Memory: 316.0K CPU: 58.979s CGroup: /system.slice/wps-ip-notifier.service \u2514\u25002028 /usr/local/bin/wps_ip_notifier Instale o pkplus-cli wget -r -np -nH --cut-dirs=5 --accept rpm \\ --http-user='seu-usuario' \\ --ask-password \\ -P /instalacoes/pkplus-cli \\ \"https://intranet.parkingplus.com.br/pub/Parking%20Plus/ParkingPlus%20InstallServer/stable/1.6.4/\" yum localinstall /instalacoes/pkplus-cli/*.rpm mkdir -p /var/lib/pkplus-svc Nas vers\u00f5es com GPU importe o tgz. \ud83d\udc4d P.S caso seja a vers\u00e3o CPU, o pkplus-cli \u00e9 capaz de rod\u00e1-la tamb\u00e9m GPU cd /instalacoes tar -xOzf ParkingPlus-WPSLPR-3.2.0_gpu.tgz images.tar | docker load tar -xzvf ParkingPlus-WPSLPR-3.2.0_gpu.tgz docker-compose.yml && tar -czvf ParkingPlus-WPSLPR-3.2.0_gpu_compose.tgz docker-compose.yml && rm docker-compose.yml pkplus-cli svc import-file ParkingPlus-WPSLPR-3.2.0_gpu_compose.tgz Inicie a imagem com o pkplus-cli pkplus-cli svc enable ParkingPlus:WPS_LPR:3.2.0 CPU pkplus-cli svc import-file /instalacoes/ParkingPlus-WPSLPR-3.2.0.tgz Ap\u00f3s a importa\u00e7\u00e3o inicie a imagem com pkplus-cli pkplus-cli svc enable ParkingPlus:WPS_LPR:3.2.0 function openTabPlatform(evt, tabName) { var i, tabcontent, tablinks; tabcontent = document.getElementsByClassName(\"tabcontent-platform\"); for (i = 0; i < tabcontent.length; i++) { tabcontent[i].style.display = \"none\"; } tablinks = document.getElementsByClassName(\"tablinks-platform\"); for (i = 0; i < tablinks.length; i++) { tablinks[i].className = tablinks[i].className.replace(\" active\", \"\"); } document.getElementById(tabName).style.display = \"block\"; evt.currentTarget.className += \" active\"; } function openTabSystem(evt, tabName) { var i, tabcontent, tablinks; tabcontent = document.getElementsByClassName(\"tabcontent-system\"); for (i = 0; i < tabcontent.length; i++) { tabcontent[i].style.display = \"none\"; } tablinks = document.getElementsByClassName(\"tablinks-system\"); for (i = 0; i < tablinks.length; i++) { tablinks[i].className = tablinks[i].className.replace(\" active\", \"\"); } document.getElementById(tabName).style.display = \"block\"; evt.currentTarget.className += \" active\"; } document.addEventListener(\"DOMContentLoaded\", function () { document.getElementById(\"defaultPlatform\").click(); document.getElementById(\"defaultSystem\").click(); }); \u26a0\ufe0f Aten\u00e7\u00e3o! Caso ap\u00f3s executar o container receba um erro de: unknown or invalid runtime name: nvidia , consulte a se\u00e7\u00e3o configura\u00e7\u00e3o do daemon do docker Ao iniciar o container, o sistema j\u00e1 estar\u00e1 em funcionamento, lendo o arquivo config.json , para executar as c\u00e2meras cadastradas, para adicionar, alterar ou remover c\u00e2meras, siga para a pr\u00f3xima se\u00e7\u00e3o.","title":"Instala\u00e7\u00e3o"},{"location":"instalacao.html#configuracao-parkingplus-wps_lpr","text":"","title":"Configura\u00e7\u00e3o ParkingPlus-WPS_LPR"},{"location":"instalacao.html#pre-requisitos","text":"Sistema operacional instalado e configurado. Docker do MQTT importado e em execu\u00e7\u00e3o. wps-ip-notifier Instalado VPN apontando para o LPR Admin LPR-Stream-Provider instalado e configurado","title":"Pr\u00e9-Requisitos"},{"location":"instalacao.html#instalacao","text":"Nesta etapa considera que todas as demais depend\u00eancias do Sistema Operacional escolhido j\u00e1 foram devidamente instaladas, para consultar quais s\u00e3o elas e o procedimento de instala\u00e7\u00e3o v\u00e1 at\u00e9 a se\u00e7\u00e3o Configura\u00e7\u00e3o Sistema Operacional . Siga estas etapas para configurar o ambiente de desenvolvimento e executar o container com o sistema WPS_LPR: Vers\u00e2o Atual: \"3.2.0\" Baixe a imagem ParkingPlus:WPS_LPR mais recente dispon\u00edvel no resposit\u00f3rio. Arquivos: - ParkingPlus-WPSLPR-3.2.0_gpu.tgz - ParkingPlus-WPSLPR-3.2.0_cpu.tgz :root { --primary-color: #ff5722; } [data-md-color-scheme=\"default\"] { --tab-bg: #f9f9f9; --tab-hover: #eeeeee; --tab-active: var(--primary-color); --tab-content-bg: #fefefe; --tab-border: #ddd; --tab-text: #333; --tab-active-text: white; --bash-bg: #f0f0f0; --bash-text: #333; --bash-green: #2e7d32; } [data-md-color-scheme=\"slate\"] { --tab-bg: #2e2e2e; --tab-hover: #3a3a3a; --tab-active: var(--primary-color); --tab-content-bg: #1f1f1f; --tab-border: #444; --tab-text: #eee; --tab-active-text: white; --bash-bg: #1e1e1e; --bash-text: #eee; --bash-green: #66bb6a; } .tab { overflow: hidden; margin-bottom: 0; } .tab button { background-color: var(--tab-bg); border: none; outline: none; padding: 10px 24px; cursor: pointer; transition: 0.3s; font-size: 12px; color: var(--tab-text); border-radius: 6px; } .tab button:hover { background-color: var(--tab-hover); } .tab button.active { background-color: var(--tab-active); color: var(--tab-active-text); } .tabcontent-platform, .tabcontent-system { display: none; padding: 2px; border-radius: 0 0 6px 6px; color: var(--tab-text); margin-bottom: 1rem; } .tabcontent-platform pre, .tabcontent-system pre { background-color: #272822; color: #f8f8f2; padding: 2px; border-radius: 6px; overflow-x: auto; } .bash-output { background-color: var(--bash-bg); color: var(--bash-text); padding: 1em; border-radius: 6px; font-family: monospace; font-size: 14px; overflow-x: auto; white-space: pre-wrap; } .bash-output .service { color: var(--bash-green); font-weight: bold; } .bash-output .active { color: var(--bash-green); font-weight: bold; } .bash-output .enabled { color: var(--bash-green); } function openTabSystemA(evt, tabName) { var i, tabcontent, tablinks; tabcontent = document.getElementsByClassName(\"tabcontent-system-A\"); for (i = 0; i < tabcontent.length; i++) { tabcontent[i].style.display = \"none\"; } tablinks = document.getElementsByClassName(\"tablinks-system-A\"); for (i = 0; i < tablinks.length; i++) { tablinks[i].className = tablinks[i].className.replace(\" active\", \"\"); } document.getElementById(tabName).style.display = \"block\"; evt.currentTarget.className += \" active\"; } function openTabSystemB(evt, tabName) { var i, tabcontent, tablinks; tabcontent = document.getElementsByClassName(\"tabcontent-system-B\"); for (i = 0; i < tabcontent.length; i++) { tabcontent[i].style.display = \"none\"; } tablinks = document.getElementsByClassName(\"tablinks-system-B\"); for (i = 0; i < tablinks.length; i++) { tablinks[i].className = tablinks[i].className.replace(\" active\", \"\"); } document.getElementById(tabName).style.display = \"block\"; evt.currentTarget.className += \" active\"; } document.addEventListener(\"DOMContentLoaded\", function () { document.getElementById(\"defaultSystem\")?.click(); // Grupo A document.getElementById(\"defaultSystem2\")?.click(); // Grupo B });","title":"Instala\u00e7\u00e3o"},{"location":"instalacao.html#configuracao-da-vpn-para-o-lpr-admin","text":"Ubuntu CentOS 7 Instale o OpenVPN: apt-get update apt install openvpn Coloque os arquivos da VPN em: /etc/openvpn Configure o arquivo .conf conforme necess\u00e1rio: nano /etc/openvpn/client_cameras_vnc.conf Inicie a VPN: systemctl start openvpn@client_cameras_vnc Verifique o status: systemctl status openvpn@client_cameras_vnc Instale o OpenVPN: yum install openvpn Coloque os arquivos da VPN em: /etc/openvpn Configure o arquivo .conf conforme necess\u00e1rio: nano /etc/openvpn/client_cameras_vnc.conf Inicie a VPN: systemctl start openvpn@client_cameras_vnc Verifique o status: systemctl status openvpn@client_cameras_vnc","title":"Configura\u00e7\u00e3o da VPN para o LPR Admin"},{"location":"instalacao.html#instalacao-do-lpr-stream-provider","text":"Baixe o pacote da vers\u00e3o mais atual: https://intranet.parkingplus.com.br/pub/Parking%20Plus/LPR/lpr-stream-provider/3.0.15/lpr-stream-provider-3.0.15.tgz Importe o servi\u00e7o usando o pkplus-cli : pkplus-cli svc import-file lpr-stream-provider-3.0.15.tgz Habilite o servi\u00e7o LPR-Stream-Provider : pkplus-cli svc enable WPS_LPR:lpr-stream-provider:3.0.15 Configure o car_park da garagem no arquivo de configura\u00e7\u00e3o: /etc/ParkingPlus/lpr-stream-provider/config/default.json Abra o arquivo em um editor de sua prefer\u00eancia e ajuste os campos car_park_id car_park_username car_park_password conforme necess\u00e1rio.","title":"Instala\u00e7\u00e3o do LPR-Stream-Provider"},{"location":"instalacao.html#arquivos","text":"GPU CPU https://intranet.parkingplus.com.br/pub/Parking%20Plus/LPR/WpsLpr/3.2.0/ParkingPlus-WPSLPR-3.2.0_gpu.tgz https://intranet.parkingplus.com.br/pub/Parking%20Plus/LPR/WpsLpr/3.2.0/ParkingPlus-WPSLPR-3.2.0_cpu.tgz","title":"Arquivos"},{"location":"instalacao.html#instalacao-de-pacotes-necessarios-e-carregamento-da-imagem","text":"Ubuntu CentOS 7","title":"Instala\u00e7\u00e3o de pacotes necess\u00e1rios e carregamento da imagem"},{"location":"instalacao_mqtt.html","text":"Configura\u00e7\u00e3o ParkingPlus-MQTT Pr\u00e9-Requisitos Sistema operacional instalado e configurado. Instala\u00e7\u00e3o Nesta etapa considera que todas as demais depend\u00eancias do Sistema Operacional escolhido j\u00e1 foram devidamente instaladas, para consultar quais s\u00e3o elas e o procedimento de instala\u00e7\u00e3o v\u00e1 at\u00e9 a se\u00e7\u00e3o Configura\u00e7\u00e3o Sistema Operacional . Siga estas etapas para importar a imagem do ParkingPLUS-MQTT: Vers\u00e2o Atual: \"1.1.0\" \u26a0\ufe0f Aten\u00e7\u00e3o Essa imagem n\u00e3o \u00e9 retrocompat\u00edvel com outras vers\u00f5es, caso deseje voltar para uma vers\u00e3o anterior do ParkingPlus:WPS_LPR:2.7.0 , o ParkingPlus-MQTT precisa ser desabilitado. Baixe a imagem ParkingPlus:MQTT mais recente dispon\u00edvel no resposit\u00f3rio. Arquivos: - ParkingPlus-MQTT-1.1.0.tgz https://intranet.parkingplus.com.br/pub/Parking%20Plus/LPR/MQTT/1.1.0/ParkingPlus-MQTT-1.1.0.tgz Instala\u00e7\u00e3o de pacotes necess\u00e1rios Instale o python3.11 (Ubuntu) Instala\u00e7\u00e3o Python 3.11 Instale o pkplus-cli (Ubuntu) Instala\u00e7\u00e3o pkplus-cli svc \u26a0\ufe0f Aten\u00e7\u00e3o! Execute o comando abaixo para criar a nova rede parkingplus_mqtt Pare os Containers do MQTT e WPS_LPR primeiro docker network rm parkingplus_mqtt docker network create --driver bridge --subnet=172.40.10.0/24 --gateway=172.40.10.1 parkingplus_mqtt Carregue a imagem com o pkplus-cli (dispon\u00edvel para Ubuntu e CentOS7) pkplus-cli svc import-file /instalacoes/ParkingPlus-MQTT-1.1.0.tgz Ap\u00f3s a importa\u00e7\u00e3o inicie a imagem do MQTT com pkplus-cli pkplus-cli svc enable ParkingPlus:MQTT:1.1.0 Caixa de Alerta .alert-box { border: 2px solid #ff4c4c; border-radius: 8px; background-color: #2d2f33; color: #ccc; padding: 16px; font-family: Arial, sans-serif; max-width: 800px; margin: 20px 0; } .alert-header { display: flex; align-items: center; background-color: #3b3b3b; padding: 8px 16px; border-radius: 6px 6px 0 0; font-weight: bold; color: #fff; } .alert-header .icon { color: #ff4c4c; font-size: 1.2em; margin-right: 8px; } .alert-content { padding-top: 12px; font-size: 0.95em; line-height: 1.5; } \u2757 CentOS7 O procedimento de instala\u00e7\u00e3o est\u00e1 descrito no manual pr\u00f3prio do sistema operacional , por\u00e9m, caso j\u00e1 esteja instalado, basta importar o arquivo.","title":"Instala\u00e7\u00e3o MQTT"},{"location":"instalacao_mqtt.html#configuracao-parkingplus-mqtt","text":"","title":"Configura\u00e7\u00e3o ParkingPlus-MQTT"},{"location":"instalacao_mqtt.html#pre-requisitos","text":"Sistema operacional instalado e configurado.","title":"Pr\u00e9-Requisitos"},{"location":"instalacao_mqtt.html#instalacao","text":"Nesta etapa considera que todas as demais depend\u00eancias do Sistema Operacional escolhido j\u00e1 foram devidamente instaladas, para consultar quais s\u00e3o elas e o procedimento de instala\u00e7\u00e3o v\u00e1 at\u00e9 a se\u00e7\u00e3o Configura\u00e7\u00e3o Sistema Operacional . Siga estas etapas para importar a imagem do ParkingPLUS-MQTT: Vers\u00e2o Atual: \"1.1.0\"","title":"Instala\u00e7\u00e3o"},{"location":"instalacao_mqtt.html#atencao","text":"Essa imagem n\u00e3o \u00e9 retrocompat\u00edvel com outras vers\u00f5es, caso deseje voltar para uma vers\u00e3o anterior do ParkingPlus:WPS_LPR:2.7.0 , o ParkingPlus-MQTT precisa ser desabilitado. Baixe a imagem ParkingPlus:MQTT mais recente dispon\u00edvel no resposit\u00f3rio. Arquivos: - ParkingPlus-MQTT-1.1.0.tgz https://intranet.parkingplus.com.br/pub/Parking%20Plus/LPR/MQTT/1.1.0/ParkingPlus-MQTT-1.1.0.tgz","title":"\u26a0\ufe0f Aten\u00e7\u00e3o"},{"location":"instalacao_mqtt.html#instalacao-de-pacotes-necessarios","text":"","title":"Instala\u00e7\u00e3o de pacotes necess\u00e1rios"},{"location":"instalacao_mqtt.html#instale-o-python311-ubuntu","text":"Instala\u00e7\u00e3o Python 3.11","title":"Instale o python3.11 (Ubuntu)"},{"location":"instalacao_mqtt.html#instale-o-pkplus-cli-ubuntu","text":"Instala\u00e7\u00e3o pkplus-cli svc","title":"Instale o pkplus-cli (Ubuntu)"},{"location":"instalacao_mqtt.html#atencao_1","text":"Execute o comando abaixo para criar a nova rede parkingplus_mqtt Pare os Containers do MQTT e WPS_LPR primeiro docker network rm parkingplus_mqtt docker network create --driver bridge --subnet=172.40.10.0/24 --gateway=172.40.10.1 parkingplus_mqtt","title":"\u26a0\ufe0f Aten\u00e7\u00e3o!"},{"location":"instalacao_mqtt.html#carregue-a-imagem-com-o-pkplus-cli-disponivel-para-ubuntu-e-centos7","text":"pkplus-cli svc import-file /instalacoes/ParkingPlus-MQTT-1.1.0.tgz","title":"Carregue a imagem com o pkplus-cli (dispon\u00edvel para Ubuntu e CentOS7)"},{"location":"instalacao_mqtt.html#apos-a-importacao-inicie-a-imagem-do-mqtt-com-pkplus-cli","text":"pkplus-cli svc enable ParkingPlus:MQTT:1.1.0 Caixa de Alerta .alert-box { border: 2px solid #ff4c4c; border-radius: 8px; background-color: #2d2f33; color: #ccc; padding: 16px; font-family: Arial, sans-serif; max-width: 800px; margin: 20px 0; } .alert-header { display: flex; align-items: center; background-color: #3b3b3b; padding: 8px 16px; border-radius: 6px 6px 0 0; font-weight: bold; color: #fff; } .alert-header .icon { color: #ff4c4c; font-size: 1.2em; margin-right: 8px; } .alert-content { padding-top: 12px; font-size: 0.95em; line-height: 1.5; } \u2757 CentOS7 O procedimento de instala\u00e7\u00e3o est\u00e1 descrito no manual pr\u00f3prio do sistema operacional , por\u00e9m, caso j\u00e1 esteja instalado, basta importar o arquivo.","title":"Ap\u00f3s a importa\u00e7\u00e3o inicie a imagem do MQTT com pkplus-cli"},{"location":"rekognition.html","text":"Manual do m\u00e9todo rekognition para Detec\u00e7\u00e3o de Placa (LPR) e Identifica\u00e7\u00e3o de Ve\u00edculo Este manual descreve o processo de envio de imagens para o endpoint que processa uma imagem e retorna a placa do ve\u00edculo, o tipo de ve\u00edculo, e as coordenadas. O cliente pode enviar a imagem como um arquivo bin\u00e1rio ou codificado em base64, utilizando a chave image no corpo da requisi\u00e7\u00e3o. 1. Introdu\u00e7\u00e3o O endpoint processa uma imagem de um ve\u00edculo utilizando um modelo de Reconhecimento Autom\u00e1tico de Placas (LPR) para extrair a placa, identificar o tipo de ve\u00edculo e retornar as coordenadas do objeto detectado. 2. URL do Endpoint URL: http://ip_wpslpr:5000/api/v0/rekognition M\u00e9todo HTTP: POST 3. Requisitos Headers: Content-Type: multipart/form-data ou application/json 4. Par\u00e2metros da Requisi\u00e7\u00e3o Envio com Bin\u00e1rio (multipart/form-data) Ao utilizar o formato multipart/form-data , a imagem \u00e9 enviada diretamente no corpo da requisi\u00e7\u00e3o, com a chave image . POST /rekognition HTTP/1.1 Host: http://ip_wpslpr:5000/api/v0/rekognition` Content-Type: multipart/form-data { \"image\": <arquivo de imagem em formato bin\u00e1rio> } Envio com Base64 (application/json) Quando a imagem estiver codificada em base64, ela deve ser enviada no formato application/json , usando tamb\u00e9m a chave image . POST /rekognition HTTP/1.1 Host: http://ip_wpslpr:5000/api/v0/rekognition Content-Type: application/json { \"image\": \"<string base64 codificada>\" } 5. Exemplo de Requisi\u00e7\u00e3o Envio de Imagem em Bin\u00e1rio curl -X POST \"http://ip_wpslpr:5000/api/v0/rekognition\" \\ -H \"Content-Type: multipart/form-data\" \\ -F \"image=@carro.jpg\" Envio de Imagem em Base64 curl -X POST \"http://ip_wpslpr:5000/api/v0/rekognition\" \\ -H \"Content-Type: application/json\" \\ -d '{ \"image\": \"/9j/4AAQSkZJRgABAQAAAQABAAD...\" }' 6. Estrutura da Resposta A resposta inclui o timestamp da requisi\u00e7\u00e3o, o tipo de objeto detectado (ex.: carro), as coordenadas do objeto, a placa reconhecida e o n\u00edvel de confian\u00e7a da predi\u00e7\u00e3o. Resposta de Sucesso { \"timestamp\": \"2024-11-07 14:47:28.931\", \"object_type\": \"CAR\", \"coor_object\": { \"xmin\": 183, \"xmax\": 857, \"ymin\": 171, \"ymax\": 558 }, \"plate_number\": \"SDH1I20\", \"confidence\": 1.0, \"car_model\": \"RAM - rampage\" } Respostas de Erro { \"status\": \"400\", \"mensagem\": \"Nenhuma imagem encontrada no formul\u00e1rio\" } { \"status\": \"400\", \"mensagem\": \"Nenhum arquivo selecionado\" } { \"status\": \"400\", \"mensagem\": \"N\u00e3o foi poss\u00edvel decodificar a imagem\" } { \"status\": \"400\", \"mensagem\": \"Nenhuma imagem em base64 encontrada no corpo da solicita\u00e7\u00e3o\" } { \"status\": \"415\", \"mensagem\": \"Tipo de conte\u00fado n\u00e3o suportado\" } 7. Tratamento de Erros 200 OK: Requisi\u00e7\u00e3o processada com sucesso. 400 Bad Request: Erro no formato ou no conte\u00fado da requisi\u00e7\u00e3o. 415 Unsuported Media Type: Erro no formato de M\u00eddia, ou n\u00e3o aceito. 500 Internal Server Error: Erro interno no servidor. 8. Fluxo de Execu\u00e7\u00e3o Cliente \u2192 Envia requisi\u00e7\u00e3o com imagem (Bin\u00e1rio ou Base64) usando a chave 'image' \u2193 Servidor \u2192 Valida o Formato e o Tamanho da Imagem \u2193 Servidor \u2192 Submete Imagem ao Modelo de LPR \u2193 Servidor \u2192 Extrai Placa, Tipo de Ve\u00edculo e Coordenadas \u2193 Servidor \u2192 Retorna Resultado (JSON) 9. Conclus\u00e3o Este manual oferece um guia pr\u00e1tico e claro para envio de imagens ao endpoint, visando obter a placa, tipo de ve\u00edculo e coordenadas. Ao seguir este formato, o cliente pode enviar imagens como bin\u00e1rio ou codificadas em base64, garantindo a flexibilidade de integra\u00e7\u00e3o com diferentes plataformas.","title":"Rekognition"},{"location":"rekognition.html#manual-do-metodo-rekognition-para-deteccao-de-placa-lpr-e-identificacao-de-veiculo","text":"Este manual descreve o processo de envio de imagens para o endpoint que processa uma imagem e retorna a placa do ve\u00edculo, o tipo de ve\u00edculo, e as coordenadas. O cliente pode enviar a imagem como um arquivo bin\u00e1rio ou codificado em base64, utilizando a chave image no corpo da requisi\u00e7\u00e3o.","title":"Manual do m\u00e9todo rekognition para Detec\u00e7\u00e3o de Placa (LPR) e Identifica\u00e7\u00e3o de Ve\u00edculo"},{"location":"rekognition.html#1-introducao","text":"O endpoint processa uma imagem de um ve\u00edculo utilizando um modelo de Reconhecimento Autom\u00e1tico de Placas (LPR) para extrair a placa, identificar o tipo de ve\u00edculo e retornar as coordenadas do objeto detectado.","title":"1. Introdu\u00e7\u00e3o"},{"location":"rekognition.html#2-url-do-endpoint","text":"URL: http://ip_wpslpr:5000/api/v0/rekognition M\u00e9todo HTTP: POST","title":"2. URL do Endpoint"},{"location":"rekognition.html#3-requisitos","text":"Headers: Content-Type: multipart/form-data ou application/json","title":"3. Requisitos"},{"location":"rekognition.html#4-parametros-da-requisicao","text":"","title":"4. Par\u00e2metros da Requisi\u00e7\u00e3o"},{"location":"rekognition.html#envio-com-binario-multipartform-data","text":"Ao utilizar o formato multipart/form-data , a imagem \u00e9 enviada diretamente no corpo da requisi\u00e7\u00e3o, com a chave image . POST /rekognition HTTP/1.1 Host: http://ip_wpslpr:5000/api/v0/rekognition` Content-Type: multipart/form-data { \"image\": <arquivo de imagem em formato bin\u00e1rio> }","title":"Envio com Bin\u00e1rio (multipart/form-data)"},{"location":"rekognition.html#envio-com-base64-applicationjson","text":"Quando a imagem estiver codificada em base64, ela deve ser enviada no formato application/json , usando tamb\u00e9m a chave image . POST /rekognition HTTP/1.1 Host: http://ip_wpslpr:5000/api/v0/rekognition Content-Type: application/json { \"image\": \"<string base64 codificada>\" }","title":"Envio com Base64 (application/json)"},{"location":"rekognition.html#5-exemplo-de-requisicao","text":"","title":"5. Exemplo de Requisi\u00e7\u00e3o"},{"location":"rekognition.html#envio-de-imagem-em-binario","text":"curl -X POST \"http://ip_wpslpr:5000/api/v0/rekognition\" \\ -H \"Content-Type: multipart/form-data\" \\ -F \"image=@carro.jpg\"","title":"Envio de Imagem em Bin\u00e1rio"},{"location":"rekognition.html#envio-de-imagem-em-base64","text":"curl -X POST \"http://ip_wpslpr:5000/api/v0/rekognition\" \\ -H \"Content-Type: application/json\" \\ -d '{ \"image\": \"/9j/4AAQSkZJRgABAQAAAQABAAD...\" }'","title":"Envio de Imagem em Base64"},{"location":"rekognition.html#6-estrutura-da-resposta","text":"A resposta inclui o timestamp da requisi\u00e7\u00e3o, o tipo de objeto detectado (ex.: carro), as coordenadas do objeto, a placa reconhecida e o n\u00edvel de confian\u00e7a da predi\u00e7\u00e3o.","title":"6. Estrutura da Resposta"},{"location":"rekognition.html#resposta-de-sucesso","text":"{ \"timestamp\": \"2024-11-07 14:47:28.931\", \"object_type\": \"CAR\", \"coor_object\": { \"xmin\": 183, \"xmax\": 857, \"ymin\": 171, \"ymax\": 558 }, \"plate_number\": \"SDH1I20\", \"confidence\": 1.0, \"car_model\": \"RAM - rampage\" }","title":"Resposta de Sucesso"},{"location":"rekognition.html#respostas-de-erro","text":"{ \"status\": \"400\", \"mensagem\": \"Nenhuma imagem encontrada no formul\u00e1rio\" } { \"status\": \"400\", \"mensagem\": \"Nenhum arquivo selecionado\" } { \"status\": \"400\", \"mensagem\": \"N\u00e3o foi poss\u00edvel decodificar a imagem\" } { \"status\": \"400\", \"mensagem\": \"Nenhuma imagem em base64 encontrada no corpo da solicita\u00e7\u00e3o\" } { \"status\": \"415\", \"mensagem\": \"Tipo de conte\u00fado n\u00e3o suportado\" }","title":"Respostas de Erro"},{"location":"rekognition.html#7-tratamento-de-erros","text":"200 OK: Requisi\u00e7\u00e3o processada com sucesso. 400 Bad Request: Erro no formato ou no conte\u00fado da requisi\u00e7\u00e3o. 415 Unsuported Media Type: Erro no formato de M\u00eddia, ou n\u00e3o aceito. 500 Internal Server Error: Erro interno no servidor.","title":"7. Tratamento de Erros"},{"location":"rekognition.html#8-fluxo-de-execucao","text":"Cliente \u2192 Envia requisi\u00e7\u00e3o com imagem (Bin\u00e1rio ou Base64) usando a chave 'image' \u2193 Servidor \u2192 Valida o Formato e o Tamanho da Imagem \u2193 Servidor \u2192 Submete Imagem ao Modelo de LPR \u2193 Servidor \u2192 Extrai Placa, Tipo de Ve\u00edculo e Coordenadas \u2193 Servidor \u2192 Retorna Resultado (JSON)","title":"8. Fluxo de Execu\u00e7\u00e3o"},{"location":"rekognition.html#9-conclusao","text":"Este manual oferece um guia pr\u00e1tico e claro para envio de imagens ao endpoint, visando obter a placa, tipo de ve\u00edculo e coordenadas. Ao seguir este formato, o cliente pode enviar imagens como bin\u00e1rio ou codificadas em base64, garantindo a flexibilidade de integra\u00e7\u00e3o com diferentes plataformas.","title":"9. Conclus\u00e3o"},{"location":"releases.html","text":"Releases WPS_LPR 3.2.0 - 2025-07-20 Gera\u00e7\u00e3o do bin\u00e1rio wps-ip-notifier 3.1.0 - 2025-07-17 Implementado sistema de autentica\u00e7\u00e3o para API LPR: Gerenciamento de usu\u00e1rios Prote\u00e7\u00e3o de m\u00e9todos de acesso Melhorias: Novos endpoints REST para verifica\u00e7\u00e3o de vagas Aprimoramento no monitoramento de IPs autorizados (remo\u00e7\u00e3o de depend\u00eancia do .env) Corre\u00e7\u00f5es: Valida\u00e7\u00e3o de placas LPR e tratamento de sa\u00eddas falsas Configura\u00e7\u00e3o LED Hikvision (sempre ligado) Ajuste no tempo de captura da c\u00e2mera para segmenta\u00e7\u00e3o Tratamento de ppcs_mappings nulos Ajustes no vehicle_count (in\u00edcio/parada) Outras altera\u00e7\u00f5es: Mensagens de log ajustadas 3.0.0 - 2025-06-11 Altera\u00e7\u00e3o da maneira como as configura\u00e7\u00f5es s\u00e3o carregadas, a partir da vers\u00e3o 3.0.0, o arquivo ser\u00e1 carregado da nuvem periodicamente, esse arquivo est\u00e1 codificado em jws, e \u00e9 necess\u00e1rio a valida\u00e7\u00e3o do mesmo com as credenciais de carpark da garagem; Altera\u00e7\u00f5es de logger para melhorar a leitura dos mesmos; Adi\u00e7\u00e3o de novos logs para debug; Adi\u00e7\u00e3o de novo m\u00e9todo de carregamento baseado no tipo de servi\u00e7o, lpr, segmenta\u00e7\u00e3o ou contador de ve\u00edculos; Melhorias em geral nos c\u00f3digos, com reorganiza\u00e7\u00f5es e docstrings atualizadas. 2.9.2 - 2025-05-16 Corre\u00e7\u00e3o do envio de tipo pessoa como moto. Agora pessoa \u00e9 enviado como pessoa e n\u00e3o moto como nas vers\u00f5es 2.9.0 e 2.9.1. 2.9.1 - 2025-05-12 Corre\u00e7\u00e3o do modelo de motos que n\u00e3o era importado, ao selecionar o modo LATAM. P.S: S\u00f3 funciona com placas de motos brasileiras. 2.9.0 Novo m\u00e9todo para detec\u00e7\u00e3o de placa e tipo de objeto; Adicionada verifica\u00e7\u00e3o de status da c\u00e2mera para tipos: segmenta\u00e7\u00e3o e contexto; Nomear threads para facilitar a depura\u00e7\u00e3o; Corre\u00e7\u00e3o de segmenta\u00e7\u00e3o, e implementa\u00e7\u00e3o de publica\u00e7\u00e3o de placas por vaga via MQTT; Modifica\u00e7\u00e3o na verifica\u00e7\u00e3o da exist\u00eancia de LEDs, que agora \u00e9 realizada por threads para agilizar o processamento; Adicionado suporte para c\u00e2meras do fabricante Axis; 2.7.3 Corre\u00e7\u00e3o do frame_ocr_rate recebido LPR Admin. 2.7.2 Corre\u00e7\u00e3o do parking_spaces_quantity quando valor setado for 0. 2.7.1 Corre\u00e7\u00e3o do Snapshot. 2.7.0 Separa\u00e7\u00e3o do MQTT do Docker da aplica\u00e7\u00e3o WPS_LPR; Corre\u00e7\u00e3o do problema de acesso a GPU pelo container ap\u00f3s daemon-reload executado no host; Adicionado os modelos de detec\u00e7\u00e3o de marca e modelo de ve\u00edculos para uso futuro; Corre\u00e7\u00e3o do acesso a GPU pelo container ap\u00f3s atualiza\u00e7\u00e3o do nvidia-container-toolkit; Corre\u00e7\u00e3o do Snapshot das vers\u00f5es 2.6.x que quebravam ap\u00f3s solicita\u00e7\u00e3o de Snaps; Envio pelo MQTT da placa reconhecida na solicita\u00e7\u00e3o do Snapshot, para LPR e WPS_360; Adi\u00e7\u00e3o de timestamp nos logs salvos em /var/log/wpslpr/. 2.6.6 Corre\u00e7\u00e3o do problema de acesso \u00e0 GPU pelo container, por conta da atualiza\u00e7\u00e3o do nvidia-container-toolkit. 2.6.5 Removido as c\u00e2meras Hikvision e Intelbras(modelos com API recentes) do envio de configura\u00e7\u00f5es via ONVIF, para ser enviado por API; Corrigido a obten\u00e7\u00e3o do modelo das c\u00e2meras Intelbras; Corre\u00e7\u00e3o da resolu\u00e7\u00e3o das c\u00e2meras, agora sempre usa a mais alta. Por\u00e9m no engine sempre ser\u00e1 1280x720, inclusive o ROI \u00e9 baseado nessa resolu\u00e7\u00e3o. 2.6.4 Tentativa de solucionar o problema de \"cannot convert float infinity to integer\". 2.6.3 Corre\u00e7\u00e3o do erro de publica\u00e7\u00e3o do MQTT, quando usu\u00e1rio insere valor inv\u00e1lido para o ocr_time. 2.6.1 Corre\u00e7\u00e3o do detector de movimentos; Troca do modelo de detec\u00e7\u00e3o de placas de motos; 2.6.0 Inclus\u00e3o de Novo Modelo de Detec\u00e7\u00e3o e OCR para placas de Motos; Inclus\u00e3o de suporte para c\u00e2meras Pumatronix; Novo m\u00e9todo de publica\u00e7\u00e3o das placas no MQTT, que agora ser\u00e1 por tempo definido; Novo m\u00e9todo de tempo de OCR, poder\u00e1 ser executado mais de um por segundo, e ser\u00e1 publicado apenas a melhor placa; Novo m\u00e9todo de ativa\u00e7\u00e3o do LED da c\u00e2mera Hikvision, agora ele fica ativo por um tempo maior, e tamb\u00e9m \u00e9 ativado no Snapshot; Alterado n\u00famero fixo de vagas que a c\u00e2mera no tipo Segmenta\u00e7\u00e3o poderia monitorar, eram 3, e agora pode ser entre 1 e 4 vagas; Separado em Threads, Execu\u00e7\u00e3o do OCR e Ativa\u00e7\u00e3o do LED, para evitar atrasos por demora na resposta da API, e na execu\u00e7\u00e3o do OCR; Nessa vers\u00e3o ao mudar o n\u00edvel de LOG, ele j\u00e1 passa a ser exibido imediatamente, sem a necessidade de reiniciar a aplica\u00e7\u00e3o. 2.5.1 Corre\u00e7\u00e3o do timeout de modelo da c\u00e2mera Intelbras; Corre\u00e7\u00e3o de aplica\u00e7\u00e3o de LED Hikvision, e controle da pot\u00eancia. 2.5.0 Implementado o reconhecimento de tipo de ve\u00edculo para Carros e Motos; Criado um endpoint para envio de imagens para o WPS_LPR reconhecer a placa do ve\u00edculo. /cgi-bin/rekognition.cgi 2.4.1 Corrigido o problema que a c\u00e2mera n\u00e3o iniciava, ap\u00f3s n\u00e3o receber a foto do snapshot de verifica\u00e7\u00e3o. Caso ela n\u00e3o receba, abrir\u00e1 o modo antigo, ou seja v\u00eddeo; Inclu\u00edda uma configura\u00e7\u00e3o de protocolo de comunica\u00e7\u00e3o para o RTSP, podendo ser UDP ou TCP. A configura\u00e7\u00e3o \u00e9 por c\u00e2mera, na chave \"protocol\", os valores esperados s\u00e3o \"udp\" ou \"tcp\". 2.4.0 Inclu\u00eddo um observador no arquivo de configura\u00e7\u00f5es, para caso haja mudan\u00e7a, ele atualizar as vari\u00e1veis que sofreram mudan\u00e7as sem que haja necessidade de reiniciar a aplica\u00e7\u00e3o; Alterado o protocolo de conex\u00e3o na c\u00e2mera, de TCP para UDP, para evitar atrasos no v\u00eddeo, quando a rede for ruim e houver retransmiss\u00e3o de pacotes; Removido o suporte da c\u00e2mera Pumatronix temporariamente. 2.3.1 Resolvido perda de conex\u00e3o ap\u00f3s reconex\u00e3o da c\u00e2mera; Removida a c\u00e2mera TP-LINK; Alterado delay snapshot de 0,5seg para 1,0seg, para garantir que o ve\u00edculo estar\u00e1 em um ponto melhor ao ser solicitado o snapshot; Alterada a confian\u00e7a m\u00ednima do primeiro caractere, para garantir que mesmo com um score menor, pode ser correto, sempre tenha placa dispon\u00edvel. 2.3.0 Controle de LED Hikvision; Frames por snapshot c\u00e2meras Hikvision e Intelbras. 2.2.0 WPS Segmentation Inclu\u00eddo. Criado a API de consulta das vagas, e as \u00faltimas altera\u00e7\u00f5es destas vagas. Corre\u00e7\u00e3o no snapshot da Intelbras, para incluir qual o canal ser\u00e1 feito.","title":"Releases"},{"location":"releases.html#releases-wps_lpr","text":"","title":"Releases WPS_LPR"},{"location":"releases.html#320-2025-07-20","text":"Gera\u00e7\u00e3o do bin\u00e1rio wps-ip-notifier","title":"3.2.0 - 2025-07-20"},{"location":"releases.html#310-2025-07-17","text":"Implementado sistema de autentica\u00e7\u00e3o para API LPR: Gerenciamento de usu\u00e1rios Prote\u00e7\u00e3o de m\u00e9todos de acesso Melhorias: Novos endpoints REST para verifica\u00e7\u00e3o de vagas Aprimoramento no monitoramento de IPs autorizados (remo\u00e7\u00e3o de depend\u00eancia do .env) Corre\u00e7\u00f5es: Valida\u00e7\u00e3o de placas LPR e tratamento de sa\u00eddas falsas Configura\u00e7\u00e3o LED Hikvision (sempre ligado) Ajuste no tempo de captura da c\u00e2mera para segmenta\u00e7\u00e3o Tratamento de ppcs_mappings nulos Ajustes no vehicle_count (in\u00edcio/parada) Outras altera\u00e7\u00f5es: Mensagens de log ajustadas","title":"3.1.0 - 2025-07-17"},{"location":"releases.html#300-2025-06-11","text":"Altera\u00e7\u00e3o da maneira como as configura\u00e7\u00f5es s\u00e3o carregadas, a partir da vers\u00e3o 3.0.0, o arquivo ser\u00e1 carregado da nuvem periodicamente, esse arquivo est\u00e1 codificado em jws, e \u00e9 necess\u00e1rio a valida\u00e7\u00e3o do mesmo com as credenciais de carpark da garagem; Altera\u00e7\u00f5es de logger para melhorar a leitura dos mesmos; Adi\u00e7\u00e3o de novos logs para debug; Adi\u00e7\u00e3o de novo m\u00e9todo de carregamento baseado no tipo de servi\u00e7o, lpr, segmenta\u00e7\u00e3o ou contador de ve\u00edculos; Melhorias em geral nos c\u00f3digos, com reorganiza\u00e7\u00f5es e docstrings atualizadas.","title":"3.0.0 - 2025-06-11"},{"location":"releases.html#292-2025-05-16","text":"Corre\u00e7\u00e3o do envio de tipo pessoa como moto. Agora pessoa \u00e9 enviado como pessoa e n\u00e3o moto como nas vers\u00f5es 2.9.0 e 2.9.1.","title":"2.9.2 - 2025-05-16"},{"location":"releases.html#291-2025-05-12","text":"Corre\u00e7\u00e3o do modelo de motos que n\u00e3o era importado, ao selecionar o modo LATAM. P.S: S\u00f3 funciona com placas de motos brasileiras.","title":"2.9.1 - 2025-05-12"},{"location":"releases.html#290","text":"Novo m\u00e9todo para detec\u00e7\u00e3o de placa e tipo de objeto; Adicionada verifica\u00e7\u00e3o de status da c\u00e2mera para tipos: segmenta\u00e7\u00e3o e contexto; Nomear threads para facilitar a depura\u00e7\u00e3o; Corre\u00e7\u00e3o de segmenta\u00e7\u00e3o, e implementa\u00e7\u00e3o de publica\u00e7\u00e3o de placas por vaga via MQTT; Modifica\u00e7\u00e3o na verifica\u00e7\u00e3o da exist\u00eancia de LEDs, que agora \u00e9 realizada por threads para agilizar o processamento; Adicionado suporte para c\u00e2meras do fabricante Axis;","title":"2.9.0"},{"location":"releases.html#273","text":"Corre\u00e7\u00e3o do frame_ocr_rate recebido LPR Admin.","title":"2.7.3"},{"location":"releases.html#272","text":"Corre\u00e7\u00e3o do parking_spaces_quantity quando valor setado for 0.","title":"2.7.2"},{"location":"releases.html#271","text":"Corre\u00e7\u00e3o do Snapshot.","title":"2.7.1"},{"location":"releases.html#270","text":"Separa\u00e7\u00e3o do MQTT do Docker da aplica\u00e7\u00e3o WPS_LPR; Corre\u00e7\u00e3o do problema de acesso a GPU pelo container ap\u00f3s daemon-reload executado no host; Adicionado os modelos de detec\u00e7\u00e3o de marca e modelo de ve\u00edculos para uso futuro; Corre\u00e7\u00e3o do acesso a GPU pelo container ap\u00f3s atualiza\u00e7\u00e3o do nvidia-container-toolkit; Corre\u00e7\u00e3o do Snapshot das vers\u00f5es 2.6.x que quebravam ap\u00f3s solicita\u00e7\u00e3o de Snaps; Envio pelo MQTT da placa reconhecida na solicita\u00e7\u00e3o do Snapshot, para LPR e WPS_360; Adi\u00e7\u00e3o de timestamp nos logs salvos em /var/log/wpslpr/.","title":"2.7.0"},{"location":"releases.html#266","text":"Corre\u00e7\u00e3o do problema de acesso \u00e0 GPU pelo container, por conta da atualiza\u00e7\u00e3o do nvidia-container-toolkit.","title":"2.6.6"},{"location":"releases.html#265","text":"Removido as c\u00e2meras Hikvision e Intelbras(modelos com API recentes) do envio de configura\u00e7\u00f5es via ONVIF, para ser enviado por API; Corrigido a obten\u00e7\u00e3o do modelo das c\u00e2meras Intelbras; Corre\u00e7\u00e3o da resolu\u00e7\u00e3o das c\u00e2meras, agora sempre usa a mais alta. Por\u00e9m no engine sempre ser\u00e1 1280x720, inclusive o ROI \u00e9 baseado nessa resolu\u00e7\u00e3o.","title":"2.6.5"},{"location":"releases.html#264","text":"Tentativa de solucionar o problema de \"cannot convert float infinity to integer\".","title":"2.6.4"},{"location":"releases.html#263","text":"Corre\u00e7\u00e3o do erro de publica\u00e7\u00e3o do MQTT, quando usu\u00e1rio insere valor inv\u00e1lido para o ocr_time.","title":"2.6.3"},{"location":"releases.html#261","text":"Corre\u00e7\u00e3o do detector de movimentos; Troca do modelo de detec\u00e7\u00e3o de placas de motos;","title":"2.6.1"},{"location":"releases.html#260","text":"Inclus\u00e3o de Novo Modelo de Detec\u00e7\u00e3o e OCR para placas de Motos; Inclus\u00e3o de suporte para c\u00e2meras Pumatronix; Novo m\u00e9todo de publica\u00e7\u00e3o das placas no MQTT, que agora ser\u00e1 por tempo definido; Novo m\u00e9todo de tempo de OCR, poder\u00e1 ser executado mais de um por segundo, e ser\u00e1 publicado apenas a melhor placa; Novo m\u00e9todo de ativa\u00e7\u00e3o do LED da c\u00e2mera Hikvision, agora ele fica ativo por um tempo maior, e tamb\u00e9m \u00e9 ativado no Snapshot; Alterado n\u00famero fixo de vagas que a c\u00e2mera no tipo Segmenta\u00e7\u00e3o poderia monitorar, eram 3, e agora pode ser entre 1 e 4 vagas; Separado em Threads, Execu\u00e7\u00e3o do OCR e Ativa\u00e7\u00e3o do LED, para evitar atrasos por demora na resposta da API, e na execu\u00e7\u00e3o do OCR; Nessa vers\u00e3o ao mudar o n\u00edvel de LOG, ele j\u00e1 passa a ser exibido imediatamente, sem a necessidade de reiniciar a aplica\u00e7\u00e3o.","title":"2.6.0"},{"location":"releases.html#251","text":"Corre\u00e7\u00e3o do timeout de modelo da c\u00e2mera Intelbras; Corre\u00e7\u00e3o de aplica\u00e7\u00e3o de LED Hikvision, e controle da pot\u00eancia.","title":"2.5.1"},{"location":"releases.html#250","text":"Implementado o reconhecimento de tipo de ve\u00edculo para Carros e Motos; Criado um endpoint para envio de imagens para o WPS_LPR reconhecer a placa do ve\u00edculo. /cgi-bin/rekognition.cgi","title":"2.5.0"},{"location":"releases.html#241","text":"Corrigido o problema que a c\u00e2mera n\u00e3o iniciava, ap\u00f3s n\u00e3o receber a foto do snapshot de verifica\u00e7\u00e3o. Caso ela n\u00e3o receba, abrir\u00e1 o modo antigo, ou seja v\u00eddeo; Inclu\u00edda uma configura\u00e7\u00e3o de protocolo de comunica\u00e7\u00e3o para o RTSP, podendo ser UDP ou TCP. A configura\u00e7\u00e3o \u00e9 por c\u00e2mera, na chave \"protocol\", os valores esperados s\u00e3o \"udp\" ou \"tcp\".","title":"2.4.1"},{"location":"releases.html#240","text":"Inclu\u00eddo um observador no arquivo de configura\u00e7\u00f5es, para caso haja mudan\u00e7a, ele atualizar as vari\u00e1veis que sofreram mudan\u00e7as sem que haja necessidade de reiniciar a aplica\u00e7\u00e3o; Alterado o protocolo de conex\u00e3o na c\u00e2mera, de TCP para UDP, para evitar atrasos no v\u00eddeo, quando a rede for ruim e houver retransmiss\u00e3o de pacotes; Removido o suporte da c\u00e2mera Pumatronix temporariamente.","title":"2.4.0"},{"location":"releases.html#231","text":"Resolvido perda de conex\u00e3o ap\u00f3s reconex\u00e3o da c\u00e2mera; Removida a c\u00e2mera TP-LINK; Alterado delay snapshot de 0,5seg para 1,0seg, para garantir que o ve\u00edculo estar\u00e1 em um ponto melhor ao ser solicitado o snapshot; Alterada a confian\u00e7a m\u00ednima do primeiro caractere, para garantir que mesmo com um score menor, pode ser correto, sempre tenha placa dispon\u00edvel.","title":"2.3.1"},{"location":"releases.html#230","text":"Controle de LED Hikvision; Frames por snapshot c\u00e2meras Hikvision e Intelbras.","title":"2.3.0"},{"location":"releases.html#220","text":"WPS Segmentation Inclu\u00eddo. Criado a API de consulta das vagas, e as \u00faltimas altera\u00e7\u00f5es destas vagas. Corre\u00e7\u00e3o no snapshot da Intelbras, para incluir qual o canal ser\u00e1 feito.","title":"2.2.0"}]}